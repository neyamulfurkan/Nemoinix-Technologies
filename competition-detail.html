<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Competition Details - Nemionix Technologies</title>
    <meta name="description" content="View competition details and register for robotics competitions in Bangladesh - Nemionix Technologies">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-500: #1991EB;
            --primary-600: #1474BC;
            --primary-700: #0F578D;
            --secondary-500: #19B969;
            --accent-500: #FF9119;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --gray-900: #111827;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --tier-bronze: #CD7F32;
            --tier-silver: #C0C0C0;
            --tier-gold: #FFD700;
            --tier-platinum: #E5E4E2;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--gray-50);
            color: var(--gray-900);
            line-height: 1.6;
        }
/* Breadcrumb Styling */
        .breadcrumb {
            background: white;
            border-bottom: 1px solid var(--gray-200);
            padding: 1rem 0;
        }

        .breadcrumb .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .breadcrumb-list {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            list-style: none;
            font-size: 0.875rem;
            margin: 0;
            padding: 0;
        }

        .breadcrumb-list li {
            display: inline-flex;
            align-items: center;
        }

        .breadcrumb-list a {
            color: var(--gray-500);
            text-decoration: none;
            transition: color 0.2s;
            font-weight: 500;
        }

        .breadcrumb-list a:hover {
            color: var(--primary-500);
        }

        .breadcrumb-list .active {
            color: var(--gray-900);
            font-weight: 600;
        }
        /* Navigation - styles from main.css */

        .btn {
            padding: 0.625rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9375rem;
        }

        .btn-primary {
            background: var(--primary-500);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-600);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(25, 145, 235, 0.3);
        }

        .btn-outline {
            background: white;
            color: var(--primary-500);
            border: 2px solid var(--primary-500);
        }

        .btn-outline:hover {
            background: var(--primary-500);
            color: white;
        }

        .btn-secondary {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .btn-secondary:hover {
            background: var(--gray-200);
        }

        .btn-success {
            background: var(--secondary-500);
            color: white;
        }

        .btn-success:hover {
            background: #149454;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(25, 185, 105, 0.3);
        }

        .cart-btn {
            position: relative;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent-500);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        /* Hero Section */
        .competition-hero {
            position: relative;
            height: 500px;
            background: var(--gray-800);
            overflow: hidden;
        }

        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.7;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.8) 40%, rgba(0,0,0,0.95) 100%);
            padding: 3rem 0;
            display: flex;
            align-items: flex-end;
        }

        .hero-content {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
            color: white;
            width: 100%;
            animation: floatUp 0.8s ease-out;
        }
        
        @keyframes floatUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .category-badge {
            display: inline-block;
            padding: 0.375rem 0.875rem;
            background: rgba(255, 255, 255, 0.98);
            color: var(--primary-600);
            border-radius: 2rem;
            font-size: 0.8125rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            animation: floatIn 0.6s ease-out 0.2s both;
        }
        
        @keyframes floatIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .competition-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.75rem;
            line-height: 1.1;
            color: white;
            text-shadow: 
                0 2px 4px rgba(0, 0, 0, 1),
                0 4px 8px rgba(0, 0, 0, 0.9),
                0 8px 16px rgba(0, 0, 0, 0.8),
                0 0 40px rgba(0, 0, 0, 0.6);
            -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3);
            animation: floatIn 0.6s ease-out 0.3s both;
        }

        .organizer-info {
            display: inline-flex;
            align-items: center;
            gap: 0.625rem;
            margin-bottom: 1rem;
            background: rgba(255, 255, 255, 0.98);
            padding: 0.5rem 0.875rem;
            border-radius: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            animation: floatIn 0.6s ease-out 0.4s both;
        }

        .organizer-logo {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid white;
            object-fit: cover;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .organizer-text {
            display: flex;
            flex-direction: column;
        }

        .organizer-label {
            font-size: 0.75rem;
            color: var(--gray-600);
        }

        .organizer-name {
            font-weight: 700;
            font-size: 0.9375rem;
            color: var(--gray-900);
            text-decoration: none;
        }
        
        .organizer-name:hover {
            color: var(--primary-600);
        }

        .organizer-name:hover {
            text-decoration: underline;
        }

        .competition-meta {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .meta-item {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.8125rem;
            background: rgba(255, 255, 255, 0.98);
            color: var(--gray-900);
            padding: 0.5rem 0.875rem;
            border-radius: 2rem;
            font-weight: 600;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
            animation: floatIn 0.6s ease-out calc(0.5s + var(--delay, 0s)) both;
        }
        
        .meta-item:nth-child(1) { --delay: 0s; }
        .meta-item:nth-child(2) { --delay: 0.1s; }
        .meta-item:nth-child(3) { --delay: 0.2s; }
        .meta-item:nth-child(4) { --delay: 0.3s; }

        .meta-icon {
            font-size: 1.125rem;
        }

/* Main Content */
        .content-wrapper {
            max-width: 1400px;
            margin: 2rem auto 0 auto;
            padding: 0 1.5rem 1.5rem 1.5rem;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 2rem;
            width: 100%;
            box-sizing: border-box;
        }
        
@media (max-width: 1199px) {
            .content-wrapper {
                grid-template-columns: 1fr !important;
                padding: 0 1rem 1rem 1rem;
                gap: 1rem;
                margin-top: 1.5rem;
            }

            .left-sidebar {
                display: none !important;
            }

            .content-grid {
                grid-column: 1 / -1 !important;
                width: 100% !important;
                max-width: 100% !important;
            }
            
            .sidebar {
                display: block !important;
                position: relative !important;
                top: 0 !important;
                margin-bottom: 2rem;
                width: 100% !important;
                max-width: 100% !important;
            }
            
            .sidebar-card {
                width: 100% !important;
                max-width: 100% !important;
            }
            
            .registration-card,
            .card {
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box !important;
            }
            
            .similar-section {
                margin-top: 2rem;
                padding-top: 2rem;
            }
        }
        @media (max-width: 768px) {
            .content-wrapper {
                padding: 0 0.75rem 0.75rem 0.75rem;
            }
            
            .card {
                padding: 1rem;
                width: 100% !important;
                max-width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
            }
            
            .competition-hero {
                height: 400px;
            }
            
            .competition-title {
                font-size: 1.5rem;
            }
            
            .sidebar,
            .sidebar-card,
            .registration-card {
                width: 100% !important;
                max-width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                box-sizing: border-box !important;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }

        .content-grid {
            grid-column: 2 / 2;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            width: 100%;
        }

        .main-column {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--gray-100);
        }

        .card-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        /* Key Details */
        .details-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .detail-label {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 500;
        }

        .detail-value {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--gray-900);
        }

        .detail-value.highlight {
            color: var(--accent-500);
            font-size: 1.25rem;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.375rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .badge-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .badge-error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        /* Prize Pool */
        .prize-pool {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-700));
            border-radius: 1rem;
            padding: 2rem;
            color: white;
        }

        .prize-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .prize-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            backdrop-filter: blur(10px);
        }

        .prize-position {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.125rem;
            font-weight: 600;
        }

        .prize-medal {
            font-size: 1.75rem;
        }

        .prize-amount {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .prize-total {
            text-align: center;
            padding-top: 1rem;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
        }

        .prize-total-label {
            font-size: 0.875rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .prize-total-amount {
            font-size: 2rem;
            font-weight: 800;
        }

        /* Description */
        .description-text {
            line-height: 1.8;
            color: var(--gray-700);
        }

        .description-text.collapsed {
            max-height: 200px;
            overflow: hidden;
            position: relative;
        }

        .description-text.collapsed::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(to bottom, transparent, white);
        }

        .show-more-btn {
            margin-top: 1rem;
            color: var(--primary-500);
            font-weight: 600;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            font-size: 0.9375rem;
        }

        /* Rules */
        .rules-section {
            border-top: 1px solid var(--gray-200);
            padding-top: 1rem;
        }

        .rules-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            transition: all 0.2s;
        }

        .rules-toggle:hover {
            background: var(--gray-100);
        }

        .rules-toggle h4 {
            font-weight: 600;
            color: var(--gray-800);
        }

        .toggle-icon {
            transition: transform 0.2s;
        }

        .toggle-icon.open {
            transform: rotate(180deg);
        }

        .rules-content {
            padding: 1rem;
            display: none;
        }

        .rules-content.open {
            display: block;
        }

        .rules-content ul, .rules-content ol {
            padding-left: 1.5rem;
            line-height: 1.8;
            color: var(--gray-700);
        }

        .rules-content li {
            margin-bottom: 0.75rem;
        }

        /* Map */
        .map-container {
            width: 100%;
            height: 300px;
            border-radius: 0.75rem;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .map-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .venue-address {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 0.5rem;
        }

        .venue-name {
            font-weight: 600;
            font-size: 1.125rem;
            color: var(--gray-900);
        }

        .venue-location {
            color: var(--gray-600);
        }

        /* Contact */
        .contact-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 0.5rem;
        }

        .contact-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-500);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
        }

        .contact-info {
            flex: 1;
        }

        .contact-label {
            font-size: 0.875rem;
            color: var(--gray-500);
            margin-bottom: 0.25rem;
        }

        .contact-value {
            font-weight: 600;
            color: var(--gray-900);
        }

        .contact-value a {
            color: var(--primary-500);
            text-decoration: none;
        }

        .contact-value a:hover {
            text-decoration: underline;
        }

        /* Left Sidebar - Compact Registration */
        .left-sidebar {
            grid-column: 1 / 2;
            position: sticky;
            top: 90px;
            height: fit-content;
            width: 280px;
        }
        
        @media (max-width: 1199px) {
            .left-sidebar {
                width: 100% !important;
                max-width: 100% !important;
                position: relative !important;
                top: 0 !important;
            }
        }

        /* Sidebar */
        .sidebar {
            display: none !important;
        }
        
        @media (max-width: 1199px) {
            .sidebar {
                width: 100% !important;
                max-width: 100% !important;
            }
        }

        .sidebar-card {
            position: relative;
            width: 100%;
            max-width: 100%;
        }

        /* Registration Card - Compact Version */
        .registration-card {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-700));
            color: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 10px 25px rgba(25, 145, 235, 0.3);
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .registration-card.compact {
            padding: 1.5rem;
            text-align: center;
        }

        .registration-card.compact .registration-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .registration-card.compact .registration-fee {
            font-size: 2.25rem;
            margin-bottom: 0.75rem;
            font-weight: 800;
        }

        .registration-card.compact .registration-fee-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }
        
        .left-sidebar .card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        @media (max-width: 1199px) {
            .registration-card,
            .sidebar .card,
            .sidebar-card .card {
                margin-left: 0 !important;
                margin-right: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
            }
        }
        
        .left-sidebar .card h4 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .registration-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .registration-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .registration-fee {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .registration-fee-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .spots-info {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .spots-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--secondary-500);
            transition: width 0.3s;
        }

        .countdown {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 145, 25, 0.2);
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .countdown-label {
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .countdown-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .register-btn {
            width: 100%;
            padding: 1rem;
            font-size: 1.125rem;
            font-weight: 700;
            border: none;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .login-notice {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            font-size: 0.875rem;
        }

        .login-notice a {
            color: white;
            font-weight: 600;
            text-decoration: underline;
        }

        /* Required Products */
        .products-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .product-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 0.75rem;
            transition: all 0.2s;
        }

        .product-item:hover {
            background: var(--gray-100);
            transform: translateX(4px);
        }

        .product-image {
            width: 80px;
            height: 80px;
            border-radius: 0.5rem;
            object-fit: cover;
        }

        .product-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .product-name {
            font-weight: 600;
            color: var(--gray-900);
            font-size: 0.9375rem;
        }

        .product-club {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        .product-price {
            font-weight: 700;
            color: var(--primary-500);
            font-size: 1.125rem;
        }

        .product-stock {
            font-size: 0.875rem;
        }

        .product-stock.in-stock {
            color: var(--success);
        }

        .product-stock.out-of-stock {
            color: var(--error);
        }

        .product-actions {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .add-cart-btn {
            padding: 0.5rem 1rem;
            background: var(--primary-500);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .add-cart-btn:hover {
            background: var(--primary-600);
            transform: translateY(-2px);
        }

        .add-cart-btn:disabled {
            background: var(--gray-300);
            cursor: not-allowed;
            transform: none;
        }

        .add-all-btn {
            width: 100%;
            margin-top: 1rem;
        }

        .no-products-message {
            text-align: center;
            padding: 2rem;
            color: var(--gray-500);
        }

        /* Club Info Card */
        .club-info {
            text-align: center;
        }

        .club-logo-large {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 1rem;
            border: 4px solid var(--primary-500);
        }

        .club-name {
            font-family: 'Poppins', sans-serif;
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .club-university {
            color: var(--gray-500);
            margin-bottom: 1rem;
        }

        .tier-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .tier-badge.bronze {
            background: linear-gradient(135deg, #CD7F32, #B87333);
            color: white;
        }

        .tier-badge.silver {
            background: linear-gradient(135deg, #C0C0C0, #A8A8A8);
            color: white;
        }

        .tier-badge.gold {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
        }

        .tier-badge.platinum {
            background: linear-gradient(135deg, #E5E4E2, #B4B4B4);
            color: #333;
        }

        .club-stats {
            display: flex;
            justify-content: space-around;
            padding: 1rem 0;
            border-top: 1px solid var(--gray-200);
            border-bottom: 1px solid var(--gray-200);
            margin-bottom: 1.5rem;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-500);
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        .club-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        /* Similar Competitions */
        .similar-section {
            grid-column: 1 / -1;
            margin-top: 3rem;
            padding: 3rem 0 0;
            border-top: 2px solid var(--gray-200);
        }

        .section-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--gray-900);
        }

        .section-subtitle {
            color: var(--gray-500);
            font-size: 1.125rem;
        }

        .competitions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .competition-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
            border: 1px solid var(--gray-200);
        }

        .competition-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-500);
        }

        .competition-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .competition-content {
            padding: 1.5rem;
        }

        .competition-category {
            display: inline-block;
            padding: 0.375rem 0.875rem;
            background: rgba(25, 145, 235, 0.1);
            color: var(--primary-500);
            border-radius: 1.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .competition-name {
            font-weight: 700;
            font-size: 1.125rem;
            margin-bottom: 1rem;
            color: var(--gray-900);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.4;
            min-height: 3rem;
        }

        .competition-info {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .info-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .competition-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-200);
        }

        .competition-fee {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--primary-500);
        }

        /* Share Section */
        .share-section {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--gray-50);
            border-radius: 0.75rem;
            margin-top: 2rem;
        }

        .share-label {
            font-weight: 600;
            color: var(--gray-700);
        }

        .share-buttons {
            display: flex;
            gap: 0.75rem;
        }

        .share-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
            transition: all 0.2s;
        }

        .share-btn.facebook {
            background: #1877F2;
            color: white;
        }

        .share-btn.whatsapp {
            background: #25D366;
            color: white;
        }

        .share-btn.twitter {
            background: #1DA1F2;
            color: white;
        }

        .share-btn.copy {
            background: var(--gray-200);
            color: var(--gray-700);
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 2000;
            padding: 1rem;
            overflow-y: auto;
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal {
            background: white;
            border-radius: 1rem;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            padding: 2rem;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--gray-100);
            margin-bottom: 2rem;
        }

        .modal-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-500);
            padding: 0.5rem;
            line-height: 1;
            transition: all 0.2s;
        }

        .close-modal:hover {
            color: var(--gray-900);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 0;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--gray-700);
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray-300);
            border-radius: 0.5rem;
            font-family: 'Inter', sans-serif;
            font-size: 0.9375rem;
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-textarea:focus {
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(25, 145, 235, 0.1);
            outline: none;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .payment-option {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 2px solid var(--gray-200);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .payment-option:hover {
            border-color: var(--primary-500);
            background: var(--gray-50);
        }

        .payment-option input[type="radio"] {
            margin-right: 1rem;
            width: 20px;
            height: 20px;
            accent-color: var(--primary-500);
        }

        .payment-option.selected {
            border-color: var(--primary-500);
            background: rgba(25, 145, 235, 0.05);
        }

        .payment-icon {
            width: 40px;
            height: 40px;
            margin-right: 1rem;
            border-radius: 0.5rem;
            object-fit: contain;
        }

        .payment-details {
            flex: 1;
        }

        .payment-name {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.25rem;
        }

        .payment-description {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        .upload-section {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 0.5rem;
            display: none;
        }

        .upload-section.active {
            display: block;
        }

        .file-upload {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .upload-area {
            border: 2px dashed var(--gray-300);
            border-radius: 0.5rem;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .upload-area:hover {
            border-color: var(--primary-500);
            background: var(--gray-50);
        }

        .upload-icon {
            font-size: 2rem;
            color: var(--gray-400);
            margin-bottom: 0.5rem;
        }

        .upload-text {
            color: var(--gray-600);
        }

        .upload-hint {
            font-size: 0.875rem;
            color: var(--gray-500);
            margin-top: 0.5rem;
        }

        .modal-footer {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            padding-top: 1.5rem;
            border-top: 2px solid var(--gray-100);
            margin-top: 1.5rem;
        }

        /* Footer */
        .footer {
            background: var(--gray-900);
            color: white;
            padding: 3rem 0 1rem;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.125rem;
            margin-bottom: 1rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.75rem;
        }

        .footer-section a {
            color: var(--gray-300);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1.5rem 1.5rem 0;
            border-top: 1px solid var(--gray-800);
            text-align: center;
            color: var(--gray-400);
        }
.similar-section .badge {
            padding: 0.375rem 0.875rem;
            background: var(--primary-500);
            color: white;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .similar-section .competition-card:hover .badge {
            background: var(--primary-600);
        }

        .similar-section .empty-message {
            text-align: center;
            padding: 3rem;
            color: var(--gray-500);
            font-size: 1rem;
            grid-column: 1 / -1;
        }
        /* Responsive Design */
        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
            }

            .sidebar {
                order: -1;
            }

            .sidebar-card {
                position: static;
            }
        }

        @media (max-width: 768px) {
            .competition-title {
                font-size: 2rem;
            }

            .details-grid {
                grid-template-columns: 1fr;
            }

            .competitions-grid {
                grid-template-columns: 1fr;
            }

            .nav-links {
                display: none;
            }

            .competition-meta {
                flex-direction: column;
                gap: 1rem;
            }

            .share-section {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        /* Loading Overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(4px);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .loading-overlay.active {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--gray-200);
            border-top-color: var(--primary-500);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast Notifications - Fixed Visibility */
        #toast-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 99999;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            pointer-events: none;
        }

        .toast {
            min-width: 300px;
            max-width: 500px;
            padding: 1rem 1.5rem;
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            pointer-events: auto;
            animation: slideIn 0.3s ease-out;
            font-weight: 600;
            font-size: 0.9375rem;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.fade-out {
            animation: slideOut 0.3s ease-out forwards;
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .toast-success {
            border-left: 4px solid var(--success);
            color: var(--gray-900);
        }

        .toast-success::before {
            content: "✓";
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--success);
            color: white;
            font-weight: bold;
        }

        .toast-error {
            border-left: 4px solid var(--error);
            color: var(--gray-900);
        }

        .toast-error::before {
            content: "✕";
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--error);
            color: white;
            font-weight: bold;
        }

        .toast-info {
            border-left: 4px solid var(--info);
            color: var(--gray-900);
        }

        .toast-info::before {
            content: "ℹ";
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--info);
            color: white;
            font-weight: bold;
        }

        .toast-warning {
            border-left: 4px solid var(--warning);
            color: var(--gray-900);
        }

        .toast-warning::before {
            content: "⚠";
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--warning);
            color: white;
            font-weight: bold;
        }
        /* Responsive - Hide left sidebar on smaller screens */
        @media (max-width: 1199px) {
            .content-wrapper {
                grid-template-columns: 1fr !important;
                padding: 1rem;
            }

            .left-sidebar {
                display: none !important;
            }

            .content-grid {
                grid-column: 1 / -1 !important;
            }
            
            .sidebar {
                display: block !important;
                position: relative !important;
                top: 0 !important;
                margin-bottom: 2rem;
            }
        }
        
        @media (max-width: 768px) {
            .content-wrapper {
                padding: 0.5rem;
            }
            
            .product-main {
                padding: 1rem;
            }
            
            .competition-hero {
                height: 400px;
            }
            
            .competition-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="spinner"></div>
    </div>
    
    <!-- Loading Overlay Alternative -->
    <div id="loading-overlay" class="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(4px); z-index: 9999; align-items: center; justify-content: center;">
        <div class="spinner"></div>
    </div>
    <!-- Toast Container -->
    <div id="toast-container" style="position: fixed; bottom: 2rem; right: 2rem; z-index: 10000; display: flex; flex-direction: column; gap: 1rem;"></div>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <!-- Logo -->
                <a href="index.html" class="logo">
                    <div class="logo-icon">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="40" height="40" rx="8" fill="url(#gradient)"/>
                            <path d="M20 10L28 16V24L20 30L12 24V16L20 10Z" fill="white" opacity="0.9"/>
                            <circle cx="20" cy="20" r="3" fill="white"/>
                            <defs>
                                <linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40">
                                    <stop offset="0%" stop-color="#1991EB"/>
                                    <stop offset="100%" stop-color="#0F578D"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <span class="logo-name">Nemionix Technologies</span>
                        <span class="logo-tagline">Engineering the Future, Today</span>
                    </div>
                </a>

                <!-- Desktop Menu -->
                <div class="nav-menu">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="competitions.html" class="nav-link active">Competitions</a>
                    <a href="products.html" class="nav-link">Products</a>
                    <a href="clubs.html" class="nav-link">Clubs</a>
                    <a href="about.html" class="nav-link">About</a>
                    <a href="how-it-works.html" class="nav-link">How It Works</a>
                </div>

                <!-- Auth Buttons -->
                <div class="nav-actions">
                    <button class="cart-btn" onclick="window.location.href='cart.html'">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span class="cart-badge" id="cartBadge">0</span>
                    </button>
                    <a href="login.html" class="btn btn-secondary">Login</a>
                    <a href="signup.html" class="btn btn-primary">Sign Up</a>
                    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="breadcrumb">
        <div class="container">
            <ul class="breadcrumb-list">
                <li><a href="index.html">Home</a></li>
                <li>›</li>
                <li><a href="competitions.html">Competitions</a></li>
                <li>›</li>
                <li class="active" id="breadcrumbTitle">Competition Details</li>
            </ul>
        </div>
    </div>
    <!-- Hero Section -->
    <section class="competition-hero">
        <img src="https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=1200" alt="Competition Banner" class="hero-image" id="heroBanner">
        <div class="hero-overlay">
            <div class="hero-content">
                <span class="category-badge" id="categoryBadge">Loading...</span>
                <h1 class="competition-title" id="competitionTitle">Loading Competition...</h1>
                
                <div class="organizer-info">
                    <img src="https://via.placeholder.com/48" alt="Club Logo" class="organizer-logo" id="clubLogo">
                    <div class="organizer-text">
                        <div class="organizer-label">Organized by</div>
                        <a href="#" class="organizer-name" id="clubName">Loading...</a>
                    </div>
                </div>

                <div class="competition-meta" id="competitionMeta">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="content-wrapper">
        <!-- Left Sidebar - Compact Registration -->
        <aside class="left-sidebar">
            <div class="registration-card compact">
                <h3 class="registration-title">Register Now</h3>
                <div class="registration-fee" id="leftRegFee">৳0</div>
                <div class="registration-fee-label">Registration Fee</div>
                
                <div style="margin: 1rem 0; padding: 0.75rem; background: rgba(255,255,255,0.2); border-radius: 0.5rem; font-size: 0.75rem;">
                    <div id="leftSpotsText">Loading...</div>
                    <div class="progress-bar" style="margin-top: 0.5rem; height: 4px;">
                        <div class="progress-fill" id="leftProgressFill" style="width: 0%"></div>
                    </div>
                </div>

                <div style="margin: 1rem 0; padding: 0.75rem; background: rgba(255,145,25,0.2); border-radius: 0.5rem; font-size: 0.75rem;">
                    <div style="margin-bottom: 0.25rem;">Registration closes in</div>
                    <div style="font-weight: 700; font-size: 0.875rem;" id="leftCountdown">Loading...</div>
                </div>

                <button class="register-btn" style="width: 100%; padding: 0.75rem; font-size: 0.9375rem;" onclick="openRegistrationModal()">
                    Register for Competition
                </button>
            </div>

            <!-- Required Components - Compact -->
            <div class="card" style="padding: 1rem; margin-top: 1rem;">
                <h4 style="font-size: 0.875rem; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                    🛒 <span>Required Components</span>
                </h4>
                <div id="leftProductsList" style="font-size: 0.75rem; color: var(--gray-600);">
                    Loading...
                </div>
            </div>
        </aside>

        <!-- Main Content Grid -->
        <div class="content-grid">
            <!-- Main Column -->
            <div class="main-column">
                <!-- Key Details Card -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">📋 Competition Details</h2>
                    </div>
                    <div class="details-grid" id="detailsGrid">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Prize Pool Card -->
                <div class="prize-pool" id="prizeSection">
                    <h2 class="card-title" style="color: white; margin-bottom: 1.5rem;">🏆 Prize Pool</h2>
                    <div class="prize-items" id="prizeItems">
                        <!-- Will be populated by JavaScript -->
                    </div>
                    <div class="prize-total">
                        <div class="prize-total-label">Total Prize Pool</div>
                        <div class="prize-total-amount" id="totalPrize">৳0</div>
                    </div>
                </div>

                <!-- Description Card -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">📝 About This Competition</h2>
                    </div>
                    <div class="description-text" id="descriptionText">
                        Loading description...
                    </div>
                    <button class="show-more-btn" id="showMoreBtn" style="display: none;">Show More</button>
                </div>

                <!-- Rules & Eligibility -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">📜 Rules & Eligibility</h2>
                    </div>

                    <div class="rules-section">
                        <div class="rules-toggle" onclick="toggleRules('rules')">
                            <h4>Competition Rules</h4>
                            <span class="toggle-icon" id="rulesIcon">▼</span>
                        </div>
                        <div class="rules-content" id="rulesContent">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="rules-section">
                        <div class="rules-toggle" onclick="toggleRules('eligibility')">
                            <h4>Eligibility Criteria</h4>
                            <span class="toggle-icon" id="eligibilityIcon">▼</span>
                        </div>
                        <div class="rules-content" id="eligibilityContent">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Venue & Location -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">📍 Venue & Location</h2>
                    </div>
                    <div class="map-container" id="mapContainer">
                        <iframe
                            id="venueMap"
                            frameborder="0"
                            style="border:0"
                            allowfullscreen=""
                            aria-hidden="false"
                            tabindex="0">
                        </iframe>
                    </div>
                    <div class="venue-address" id="venueAddress">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">📞 Contact Information</h2>
                    </div>
                    <div class="contact-items" id="contactItems">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Share Section -->
                <div class="share-section">
                    <span class="share-label">Share this competition:</span>
                    <div class="share-buttons">
                        <button class="share-btn facebook" onclick="shareOnFacebook()">
                            📘
                        </button>
                        <button class="share-btn whatsapp" onclick="shareOnWhatsApp()">
                            💬
                        </button>
                        <button class="share-btn twitter" onclick="shareOnTwitter()">
                            🐦
                        </button>
                        <button class="share-btn copy" onclick="copyLink()">
                            🔗
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-card">
                    <!-- Registration Card -->
                    <div class="registration-card" id="registrationCard">
                        <div class="registration-header">
                            <h3 class="registration-title">Register Now</h3>
                            <div class="registration-fee" id="registrationFee">৳0</div>
                            <div class="registration-fee-label">Registration Fee</div>
                        </div>

                        <div class="spots-info" id="spotsInfo">
                            <div class="spots-progress">
                                <span id="spotsText">Loading...</span>
                                <span id="spotsCount">0/0</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="countdown" id="countdownSection">
                            <div class="countdown-label">Registration closes in</div>
                            <div class="countdown-value" id="countdownValue">Loading...</div>
                        </div>

                        <button class="register-btn btn-success" id="registerBtn" onclick="openRegistrationModal()">
                            Register for Competition
                        </button>

                        <div class="login-notice" id="loginNotice" style="display: none;">
                            Please <a href="login.html">login</a> to register
                        </div>
                    </div>

                    <!-- Required Products Card -->
                    <div class="card" style="margin-top: 1.5rem;">
                        <div class="card-header">
                            <h3 class="card-title">🛒 Required Components</h3>
                        </div>
                        <div class="products-list" id="productsList">
                            <div class="no-products-message">No required products listed</div>
                        </div>
                        <button class="btn btn-primary add-all-btn" id="addAllBtn" style="display: none;" onclick="addAllToCart()">
                            Add All to Cart
                        </button>
                    </div>

                    <!-- Club Info Card -->
                    <div class="card" style="margin-top: 1.5rem;">
                        <div class="club-info" id="clubInfo">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Similar Competitions Section -->
            <section class="similar-section">
            <div class="section-header">
                <h2 class="section-title">Similar Competitions</h2>
                <p class="section-subtitle">You might also be interested in</p>
            </div>
            <div class="competitions-grid" id="similarCompetitions">
                <!-- Will be populated by JavaScript -->
            </div>
        </section>
        </div>
    </div>

    <!-- Registration Modal -->
    <div class="modal-overlay" id="registrationModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Register for Competition</h3>
                <button class="close-modal" onclick="closeRegistrationModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="registrationForm">
                    <div class="form-group">
                        <label class="form-label">Team Name *</label>
                        <input type="text" class="form-input" id="teamName" required placeholder="Enter your team name">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Team Members *</label>
                        <textarea class="form-textarea" id="teamMembers" required placeholder="List all team member names (one per line)"></textarea>
                        <small style="color: var(--gray-500);">Enter each member's name on a new line</small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Contact Phone *</label>
                        <input type="tel" class="form-input" id="contactPhone" required placeholder="01XXXXXXXXX">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Payment Method *</label>
                        <div class="payment-methods">
                            <label class="payment-option" onclick="selectPayment('cash')">
                                <input type="radio" name="payment" value="cash_on_delivery" id="paymentCash">
                                <div class="payment-details">
                                    <div class="payment-name">Cash on Delivery</div>
                                    <div class="payment-description">Pay when you arrive at the venue</div>
                                </div>
                            </label>

                            <label class="payment-option" onclick="selectPayment('bkash')">
                                <input type="radio" name="payment" value="bkash" id="paymentBkash">
                                <div class="payment-details">
                                    <div class="payment-name">bKash</div>
                                    <div class="payment-description">Mobile payment via bKash</div>
                                </div>
                            </label>

                            <label class="payment-option" onclick="selectPayment('nagad')">
                                <input type="radio" name="payment" value="nagad" id="paymentNagad">
                                <div class="payment-details">
                                    <div class="payment-name">Nagad</div>
                                    <div class="payment-description">Mobile payment via Nagad</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="upload-section" id="paymentUploadSection">
                        <div class="form-group">
                            <label class="form-label">Transaction ID *</label>
                            <input type="text" class="form-input" id="transactionId" placeholder="Enter transaction ID">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Payment Screenshot *</label>
                            <div class="file-upload">
                                <label for="paymentScreenshot" class="upload-area">
                                    <div class="upload-icon">📷</div>
                                    <div class="upload-text">Click to upload screenshot</div>
                                    <div class="upload-hint">JPG, PNG (Max 2MB)</div>
                                </label>
                                <input type="file" id="paymentScreenshot" accept="image/*" style="display: none;" onchange="handleFileSelect(event)">
                            </div>
                            <div id="filePreview" style="margin-top: 1rem;"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeRegistrationModal()">Cancel</button>
                <button type="submit" class="btn btn-success" onclick="submitRegistration(event)">Complete Registration</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <!-- About Column -->
                <div class="footer-column">
                    <div class="footer-logo">
                        <svg width="36" height="36" viewBox="0 0 40 40" fill="none">
                            <rect width="40" height="40" rx="8" fill="url(#footerGradient)"/>
                            <path d="M20 10L28 16V24L20 30L12 24V16L20 10Z" fill="white" opacity="0.9"/>
                            <circle cx="20" cy="20" r="3" fill="white"/>
                            <defs>
                                <linearGradient id="footerGradient" x1="0" y1="0" x2="40" y2="40">
                                    <stop offset="0%" stop-color="#1991EB"/>
                                    <stop offset="100%" stop-color="#0F578D"/>
                                </linearGradient>
                            </defs>
                        </svg>
                        <span>Nemionix Technologies</span>
                    </div>
                    <p class="footer-tagline">Engineering the Future</p>
                    <p class="footer-description">Bangladesh's premier robotics marketplace connecting students, clubs, and innovation through cutting-edge technology.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M20 10C20 4.477 15.523 0 10 0S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z"/>
                            </svg>
                        </a>
                        <a href="#" aria-label="Instagram">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 0C7.284 0 6.944.012 5.877.06 4.813.109 4.086.278 3.45.525a4.88 4.88 0 00-1.771 1.154A4.908 4.908 0 00.525 3.45C.278 4.086.109 4.813.06 5.877.012 6.944 0 7.284 0 10s.012 3.056.06 4.123c.049 1.064.218 1.791.465 2.427a4.883 4.883 0 001.154 1.771 4.915 4.915 0 001.771 1.154c.636.247 1.363.416 2.427.465C6.944 19.988 7.284 20 10 20s3.056-.012 4.123-.06c1.064-.049 1.791-.218 2.427-.465a4.89 4.89 0 001.771-1.154 4.904 4.904 0 001.154-1.771c.247-.636.416-1.363.465-2.427C19.988 13.056 20 12.716 20 10s-.012-3.056-.06-4.123c-.049-1.064-.218-1.791-.465-2.427a4.893 4.893 0 00-1.154-1.771A4.886 4.886 0 0016.55.525C15.914.278 15.187.109 14.123.06 13.056.012 12.716 0 10 0zm0 1.802c2.67 0 2.987.01 4.041.059.976.045 1.505.207 1.858.344.466.182.8.399 1.15.748.35.35.566.684.748 1.15.137.353.3.882.344 1.857.048 1.055.058 1.37.058 4.04 0 2.671-.01 2.986-.058 4.041-.045.976-.207 1.505-.344 1.858a3.097 3.097 0 01-.748 1.15c-.35.35-.684.566-1.15.748-.353.137-.882.3-1.857.344-1.054.048-1.37.058-4.041.058-2.67 0-2.987-.01-4.04-.058-.976-.045-1.505-.207-1.858-.344a3.098 3.098 0 01-1.15-.748 3.098 3.098 0 01-.748-1.15c-.137-.353-.3-.882-.344-1.857-.048-1.055-.058-1.37-.058-4.041 0-2.67.01-2.986.058-4.04.045-.976.207-1.505.344-1.858.182-.466.399-.8.748-1.15.35-.35.684-.566 1.15-.748.353-.137.882-.3 1.857-.344 1.055-.048 1.37-.058 4.041-.058zM10 13.333A3.333 3.333 0 1110 6.667a3.333 3.333 0 010 6.666zm0-8.468a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm6.538-.203a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z"/>
                            </svg>
                        </a>
                        <a href="mailto:support@nemionix.com" aria-label="Email">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="footer-column">
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="competitions.html">Competitions</a></li>
                        <li><a href="clubs.html">Clubs</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="how-it-works.html">How It Works</a></li>
                    </ul>
                </div>

                <!-- For Students -->
                <div class="footer-column">
                    <h3 class="footer-heading">For Students</h3>
                    <ul class="footer-links">
                        <li><a href="signup.html?role=student">Sign Up</a></li>
                        <li><a href="products.html">Browse Products</a></li>
                        <li><a href="competitions.html">Find Competitions</a></li>
                        <li><a href="my-orders.html">Track Orders</a></li>
                        <li><a href="my-registrations.html">My Registrations</a></li>
                    </ul>
                </div>

                <!-- For Clubs -->
                <div class="footer-column">
                    <h3 class="footer-heading">For Clubs</h3>
                    <ul class="footer-links">
                        <li><a href="signup.html?role=club_admin">Become a Seller</a></li>
                        <li><a href="create-competition.html">Create Competition</a></li>
                        <li><a href="reward-status.html">Reward System</a></li>
                        <li><a href="my-earnings.html">Earnings Dashboard</a></li>
                        <li><a href="clubs.html">View Leaderboard</a></li>
                    </ul>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p class="copyright">&copy; 2025 Nemionix Technologies. All rights reserved.</p>
                    <div class="footer-bottom-links">
                        <a href="#">Terms of Service</a>
                        <span class="separator">•</span>
                        <a href="#">Privacy Policy</a>
                        <span class="separator">•</span>
                        <a href="mailto:support@nemionix.com">Support</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/mobile-menu.js"></script>

    <script>
        let currentCompetition = null;
        let currentUser = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                currentUser = Auth.getCurrentUser();
                updateNavigation();
                await loadCompetitionDetails();
                Utils.updateCartBadge();
            } catch (error) {
                console.error('Page initialization error:', error);
                Utils.hideLoading();
            } finally {
                // Force remove loading overlay
                setTimeout(() => {
                    const overlay = document.getElementById('loadingOverlay');
                    if (overlay) {
                        overlay.classList.remove('active');
                        overlay.style.display = 'none';
                    }
                }, 1000);
            }
        });

        // Update navigation based on auth state
        function updateNavigation() {
            const navActions = document.querySelector('.nav-actions');
            
            if (currentUser) {
                let dashboardLink = '';
                if (currentUser.role === 'student') {
                    dashboardLink = 'student-dashboard.html';
                } else if (currentUser.role === 'club_admin') {
                    dashboardLink = 'club-dashboard.html';
                } else if (currentUser.role === 'super_admin') {
                    dashboardLink = 'super-admin-dashboard.html';
                }

                navActions.innerHTML = `
                    <button class="cart-btn" onclick="window.location.href='cart.html'">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span class="cart-badge" id="cartBadge">0</span>
                    </button>
                    <a href="${dashboardLink}" class="btn btn-primary">${currentUser.full_name.split(' ')[0]}</a>
                    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                `;
                
                Utils.updateCartBadge();
            } else {
                navActions.innerHTML = `
                    <button class="cart-btn" onclick="window.location.href='cart.html'">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span class="cart-badge" id="cartBadge">0</span>
                    </button>
                    <a href="login.html" class="btn btn-secondary">Login</a>
                    <a href="signup.html" class="btn btn-primary">Sign Up</a>
                    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                `;
            }
        }

        // Load competition details
        async function loadCompetitionDetails() {
            const loadingOverlay = document.getElementById('loadingOverlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('active');
                loadingOverlay.style.display = 'flex';
            }
            
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const competitionId = urlParams.get('id');
                
                if (!competitionId) {
                    throw new Error('Competition ID not provided');
                }

                const data = await apiClient.get(`/competitions/${competitionId}`);
                
                console.log('Competition API response:', data);

                // Handle different response structures
                if (data.success && data.data) {
                    currentCompetition = data.data;
                } else if (data.competition) {
                    currentCompetition = data.competition;
                } else if (data.data && data.data.competition) {
                    currentCompetition = data.data.competition;
                } else {
                    throw new Error('Invalid competition data structure');
                }
                
                console.log('Current competition:', currentCompetition);
                
                if (!currentCompetition) {
                    throw new Error('Competition data not found');
                }

                renderCompetitionDetails();
                await loadSimilarCompetitions();
                
            } catch (error) {
                console.error('Error loading competition:', error);
                Utils.showToast(error.message || 'Failed to load competition', 'error');
                setTimeout(() => window.location.href = 'competitions.html', 2000);
            } finally {
                Utils.hideLoading();
                // Force hide loading after a timeout
                setTimeout(() => {
                    Utils.hideLoading();
                    const loadingOverlay = document.getElementById('loadingOverlay');
                    if (loadingOverlay) {
                        loadingOverlay.classList.remove('active');
                        loadingOverlay.style.display = 'none';
                    }
                }, 500);
            }
        }

        // Render competition details
        // Render competition details
    function renderCompetitionDetails() {
        const comp = currentCompetition;

        // Define counts at the very top - CRITICAL for all calculations
        const approvedCount = comp.approved_count || 0;
        const totalApplications = comp.total_applications || 0;
        const spotsRemaining = comp.max_participants ? (comp.max_participants - approvedCount) : null;
        const spotsProgress = comp.max_participants ? (approvedCount / comp.max_participants) * 100 : 0;
        
        // Update hero section
        document.getElementById('heroBanner').src = comp.banner_url || 'data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%271200%27 height=%27500%27%3E%3Crect fill=%27%231991EB%27 width=%271200%27 height=%27500%27/%3E%3Ctext fill=%27white%27 font-family=%27sans-serif%27 font-size=%2748%27 font-weight=%27bold%27 x=%2750%25%27 y=%2750%25%27 text-anchor=%27middle%27 dy=%27.35em%27%3E🏆 Competition%3C/text%3E%3C/svg%3E';
        document.getElementById('categoryBadge').textContent = comp.category;
        document.getElementById('competitionTitle').textContent = comp.title;
        document.getElementById('clubLogo').src = comp.club_logo || comp.club_logo_url || 'data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2748%27 height=%2748%27%3E%3Crect fill=%27%23e5e7eb%27 width=%2748%27 height=%2748%27 rx=%2724%27/%3E%3Ctext fill=%27%236b7280%27 font-family=%27sans-serif%27 font-size=%2720%27 font-weight=%27bold%27 x=%2750%25%27 y=%2750%25%27 text-anchor=%27middle%27 dy=%27.35em%27%3EC%3C/text%3E%3C/svg%3E';
        document.getElementById('clubName').textContent = comp.club_name;
        document.getElementById('clubName').href = `club-profile.html?slug=${comp.club_slug}`;

        // Competition meta
        const competitionDate = new Date(comp.competition_date);
        const registrationDeadline = new Date(comp.registration_deadline);
            
            document.getElementById('competitionMeta').innerHTML = `
                <div class="meta-item">
                    <span class="meta-icon">📅</span>
                    <span>${Utils.formatDate(comp.competition_date)}</span>
                </div>
                <div class="meta-item">
                    <span class="meta-icon">⏰</span>
                    <span>${Utils.formatTime(comp.competition_time)}</span>
                </div>
                <div class="meta-item">
                    <span class="meta-icon">📍</span>
                    <span>${comp.venue}</span>
                </div>
                <div class="meta-item">
                    <span class="meta-icon">👥</span>
                    <span>${approvedCount} Registered${comp.max_participants ? ` / ${comp.max_participants} Max` : ''}</span>
                </div>
            `;

            // Key details
            const status = new Date() > registrationDeadline ? 'Registration Closed' : 
                          (spotsRemaining !== null && spotsRemaining <= 0) ? 'Fully Booked' : 'Open for Registration';
            const statusClass = status === 'Open for Registration' ? 'badge-success' : 'badge-error';

            document.getElementById('detailsGrid').innerHTML = `
                <div class="detail-item">
                    <span class="detail-label">Competition Date</span>
                    <span class="detail-value">${Utils.formatDate(comp.competition_date)}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Registration Fee</span>
                    <span class="detail-value highlight">${Utils.formatPrice(comp.registration_fee)}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Registration Deadline</span>
                    <span class="detail-value">${Utils.formatDate(comp.registration_deadline)}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Applications Received</span>
                    <span class="detail-value" style="color: var(--primary-500); font-weight: 700;">${comp.total_applications || 0} Applied</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Approved Registrations</span>
                    <span class="detail-value" style="color: var(--secondary-500); font-weight: 700;">${comp.approved_count || 0} Registered</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Max Participants</span>
                    <span class="detail-value">${comp.max_participants || 'Unlimited'}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Status</span>
                    <span class="badge ${statusClass}">${status}</span>
                </div>
            `;
        // Prize pool
        if (comp.prize_first || comp.prize_second || comp.prize_third) {
            const totalPrize = parseFloat(comp.prize_first || 0) + parseFloat(comp.prize_second || 0) + parseFloat(comp.prize_third || 0);
            
            document.getElementById('prizeItems').innerHTML = `
                ${comp.prize_first ? `
                <div class="prize-item">
                    <div class="prize-position">
                        <span class="prize-medal">🥇</span>
                        <span>1st Place</span>
                    </div>
                    <div class="prize-amount">${Utils.formatPrice(comp.prize_first)}</div>
                </div>` : ''}
                ${comp.prize_second ? `
                <div class="prize-item">
                    <div class="prize-position">
                        <span class="prize-medal">🥈</span>
                        <span>2nd Place</span>
                    </div>
                    <div class="prize-amount">${Utils.formatPrice(comp.prize_second)}</div>
                </div>` : ''}
                ${comp.prize_third ? `
                <div class="prize-item">
                    <div class="prize-position">
                        <span class="prize-medal">🥉</span>
                        <span>3rd Place</span>
                    </div>
                    <div class="prize-amount">${Utils.formatPrice(comp.prize_third)}</div>
                </div>` : ''}
            `;
            
            document.getElementById('totalPrize').textContent = Utils.formatPrice(totalPrize);
        } else {
            document.getElementById('prizeSection').style.display = 'none';
        }

        // Description
        const descText = document.getElementById('descriptionText');
        descText.textContent = comp.description;
        
        if (comp.description.length > 500) {
            descText.classList.add('collapsed');
            document.getElementById('showMoreBtn').style.display = 'block';
        }

        // Rules and eligibility
        document.getElementById('rulesContent').innerHTML = `<div style="padding: 1rem;">${formatText(comp.rules || 'Rules will be announced soon.')}</div>`;
        document.getElementById('eligibilityContent').innerHTML = `<div style="padding: 1rem;">${formatText(comp.eligibility || 'Open to all university students.')}</div>`;

        // Venue map - Use Google Maps iframe instead
        const mapContainer = document.getElementById('mapContainer');
        const venueMap = document.getElementById('venueMap');
        
        if (comp.location_lat && comp.location_lng) {
            const lat = parseFloat(comp.location_lat);
            const lng = parseFloat(comp.location_lng);
            
            if (!isNaN(lat) && !isNaN(lng)) {
                // Use Google Maps embed
                venueMap.src = `https://maps.google.com/maps?q=${lat},${lng}&z=15&output=embed`;
                mapContainer.style.display = 'block';
            } else {
                mapContainer.style.display = 'none';
            }
        } else {
            mapContainer.style.display = 'none';
        }

        document.getElementById('venueAddress').innerHTML = `
            <div class="venue-name">${comp.venue}</div>
            <div class="venue-location">${comp.venue}</div>
        `;

        // Contact information
        document.getElementById('contactItems').innerHTML = `
            ${comp.contact_email ? `
            <div class="contact-item">
                <div class="contact-icon">📧</div>
                <div class="contact-info">
                    <div class="contact-label">Email</div>
                    <div class="contact-value"><a href="mailto:${comp.contact_email}">${comp.contact_email}</a></div>
                </div>
            </div>` : ''}
            ${comp.contact_phone ? `
            <div class="contact-item">
                <div class="contact-icon">📞</div>
                <div class="contact-info">
                    <div class="contact-label">Phone</div>
                    <div class="contact-value"><a href="tel:${comp.contact_phone}">${comp.contact_phone}</a></div>
                </div>
            </div>` : ''}
        `;

        // Registration card
        document.getElementById('registrationFee').textContent = Utils.formatPrice(comp.registration_fee);
        
        const displayText = comp.max_participants 
            ? (spotsRemaining > 0 ? `${spotsRemaining} spots remaining` : 'Fully booked')
            : `${approvedCount} registered`;
        
        document.getElementById('spotsText').textContent = displayText;
        document.getElementById('spotsCount').textContent = comp.max_participants 
            ? `${approvedCount}/${comp.max_participants}` 
            : `${approvedCount} registered`;
        document.getElementById('progressFill').style.width = `${spotsProgress}%`;

        // Countdown
        updateCountdown(registrationDeadline);
        setInterval(() => updateCountdown(registrationDeadline), 1000);

        // Registration button
        const registerBtn = document.getElementById('registerBtn');
        const loginNotice = document.getElementById('loginNotice');
        
        if (!currentUser) {
            registerBtn.style.display = 'none';
            loginNotice.style.display = 'block';
        } else if (comp.user_registration_status) {
            // User has already registered
            registerBtn.disabled = true;
            registerBtn.className = 'btn btn-success';
            if (comp.user_registration_status === 'approved') {
                registerBtn.textContent = '✅ You are Registered';
            } else if (comp.user_registration_status === 'pending') {
                registerBtn.textContent = '⏳ Application Submitted (Pending Approval)';
            } else if (comp.user_registration_status === 'rejected') {
                registerBtn.textContent = '❌ Application Rejected';
                registerBtn.className = 'btn btn-danger';
            }
        } else if (new Date() > registrationDeadline || (comp.max_participants && spotsRemaining <= 0)) {
            registerBtn.disabled = true;
            registerBtn.textContent = status;
        }

        // Required products - CRITICAL: Check for null, undefined, empty array
        console.log('Required products:', comp.required_products);
        
        // Check if products actually exist and have items
        const hasProducts = comp.required_products && 
                          Array.isArray(comp.required_products) && 
                          comp.required_products.length > 0 &&
                          comp.required_products[0] !== null; // Extra check for null entries
        
        if (hasProducts) {
            renderRequiredProducts(comp.required_products);
            document.getElementById('addAllBtn').style.display = 'block';
        } else {
            const productsList = document.getElementById('productsList');
            if (productsList) {
                productsList.innerHTML = '<div class="no-products-message">No required products listed</div>';
            }
            document.getElementById('addAllBtn').style.display = 'none';
        }

        // Club info
        renderClubInfo(comp);

        // Update left sidebar
        if (document.getElementById('leftRegFee')) {
            document.getElementById('leftRegFee').textContent = Utils.formatPrice(comp.registration_fee);
        }
        
        if (document.getElementById('leftSpotsText')) {
            const leftSpotsText = comp.max_participants && spotsRemaining !== null
                ? `${spotsRemaining} spots left`
                : `${approvedCount} registered`;
            document.getElementById('leftSpotsText').textContent = leftSpotsText;
        }
        
        if (document.getElementById('leftProgressFill')) {
            const spotsProgress = comp.max_participants ? (comp.registration_count / comp.max_participants) * 100 : 0;
            document.getElementById('leftProgressFill').style.width = `${spotsProgress}%`;
        }
        
        // Update left sidebar products list with actual product details
        const leftProductsList = document.getElementById('leftProductsList');
        if (leftProductsList) {
            if (comp.required_products && Array.isArray(comp.required_products) && comp.required_products.length > 0) {
                leftProductsList.innerHTML = comp.required_products.slice(0, 3).map(p => `
                    <div style="display: flex; flex-direction: column; gap: 0.5rem; padding: 0.75rem; background: var(--gray-50); border-radius: 0.5rem; margin-bottom: 0.5rem;">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div style="flex: 1;">
                                <div style="font-size: 0.75rem; font-weight: 600; color: var(--gray-900); line-height: 1.2; margin-bottom: 0.25rem;">${p.name}</div>
                                <div style="font-size: 0.65rem; color: var(--gray-500);">${p.club_name}</div>
                            </div>
                            <div style="font-size: 0.75rem; font-weight: 700; color: var(--primary-500);">৳${p.price}</div>
                        </div>
                        <button 
                            onclick="addToCart(${p.id}); event.stopPropagation();" 
                            style="width: 100%; padding: 0.375rem; background: var(--primary-500); color: white; border: none; border-radius: 0.375rem; font-size: 0.65rem; font-weight: 600; cursor: pointer; transition: all 0.2s;"
                            onmouseover="this.style.background='var(--primary-600)'" 
                            onmouseout="this.style.background='var(--primary-500)'"
                            ${p.stock === 0 ? 'disabled style="background: var(--gray-300); cursor: not-allowed;"' : ''}>
                            ${p.stock > 0 ? '🛒 Add to Cart' : 'Out of Stock'}
                        </button>
                    </div>
                `).join('') + (comp.required_products.length > 3 ? `
                    <div style="font-size: 0.65rem; color: var(--gray-500); text-align: center; margin-top: 0.5rem;">
                        +${comp.required_products.length - 3} more item${comp.required_products.length - 3 > 1 ? 's' : ''}
                    </div>
                ` : '');
            } else {
                leftProductsList.innerHTML = `
                    <div style="font-size: 0.75rem; color: var(--gray-500); text-align: center; padding: 1rem;">
                        No required products
                    </div>
                `;
            }
        }
    }
    // Render required products
    function renderRequiredProducts(products) {
        const productsList = document.getElementById('productsList');
        
        productsList.innerHTML = products.map(product => `
            <div class="product-item">
                <img src="${product.image_url || 'https://via.placeholder.com/80'}" alt="${product.name}" class="product-image">
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-club">${product.club_name}</div>
                    <div class="product-price">${Utils.formatPrice(product.price)}</div>
                    <div class="product-stock ${product.stock > 0 ? 'in-stock' : 'out-of-stock'}">
                        ${product.stock > 0 ? `${product.stock} in stock` : 'Out of stock'}
                    </div>
                </div>
                <div class="product-actions">
                    <button class="add-cart-btn" onclick="addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''}>
                        ${product.stock > 0 ? 'Add to Cart' : 'Out of Stock'}
                    </button>
                </div>
            </div>
        `).join('');

        document.getElementById('addAllBtn').style.display = 'block';
    }

    // Render club info
    function renderClubInfo(comp) {
        const tierColors = {
            bronze: 'bronze',
            silver: 'silver',
            gold: 'gold',
            platinum: 'platinum'
        };

        document.getElementById('clubInfo').innerHTML = `
            <img src="${comp.club_logo || comp.club_logo_url || 'data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27100%27 height=%27100%27%3E%3Crect fill=%27%23e5e7eb%27 width=%27100%27 height=%27100%27 rx=%2750%27/%3E%3Ctext fill=%27%236b7280%27 font-family=%27sans-serif%27 font-size=%2740%27 font-weight=%27bold%27 x=%2750%25%27 y=%2750%25%27 text-anchor=%27middle%27 dy=%27.35em%27%3EC%3C/text%3E%3C/svg%3E'}" alt="${comp.club_name}" class="club-logo-large">
            <div class="club-name">${comp.club_name}</div>
            <div class="club-university">${comp.club_university || ''}</div>
            <div class="tier-badge ${tierColors[comp.club_tier] || 'bronze'}">
                ${comp.club_tier ? `${comp.club_tier.toUpperCase()} TIER` : 'BRONZE TIER'}
            </div>
            <div class="club-stats">
                <div class="stat-item">
                    <div class="stat-value">${comp.club_products_count || 0}</div>
                    <div class="stat-label">Products</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${comp.club_competitions_count || 0}</div>
                    <div class="stat-label">Events</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${comp.club_rating || '4.5'}</div>
                    <div class="stat-label">Rating</div>
                </div>
            </div>
            <div class="club-actions">
                <a href="club-profile.html?slug=${comp.club_slug}" class="btn btn-primary" style="width: 100%; text-align: center;">
                    View Club Profile
                </a>
            </div>
        `;
    }

    // Load similar competitions
    async function loadSimilarCompetitions() {
        try {
            const data = await apiClient.get(`/competitions`, {
                category: currentCompetition.category,
                limit: 3
            });
            
            if (data.competitions) {
                const similar = data.competitions.filter(c => c.id !== currentCompetition.id).slice(0, 3);
                renderSimilarCompetitions(similar);
            }
        } catch (error) {
            console.error('Error loading similar competitions:', error);
        }
    }

    // Render similar competitions
    function renderSimilarCompetitions(competitions) {
        const container = document.getElementById('similarCompetitions');
        
        if (competitions.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--gray-500);">No similar competitions found</p>';
            return;
        }

        container.innerHTML = competitions.map(comp => `
            <a href="competition-detail.html?id=${comp.id}" class="competition-card">
                <img src="${comp.banner_url || 'https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=400'}" alt="${comp.title}" class="competition-image">
                <div class="competition-content">
                    <span class="competition-category">${comp.category}</span>
                    <h3 class="competition-name">${comp.title}</h3>
                    <div class="competition-info">
                        <div class="info-row">
                            <span>📅</span>
                            <span>${Utils.formatDate(comp.competition_date)}</span>
                        </div>
                        <div class="info-row">
                            <span>📍</span>
                            <span>${comp.venue}</span>
                        </div>
                        <div class="info-row">
                            <span>👥</span>
                            <span>${comp.registration_count} registered</span>
                        </div>
                    </div>
                    <div class="competition-footer">
                        <div class="competition-fee">${Utils.formatPrice(comp.registration_fee)}</div>
                        <span class="badge badge-success">Register</span>
                    </div>
                </div>
            </a>
        `).join('');
    }

    // Update countdown timer
    function updateCountdown(deadline) {
        const now = new Date();
        const diff = deadline - now;
        
        if (diff <= 0) {
            document.getElementById('countdownValue').textContent = 'Registration Closed';
            document.getElementById('countdownSection').style.background = 'rgba(239, 68, 68, 0.2)';
            return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        document.getElementById('countdownValue').textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        
        // Update left sidebar countdown
        if (document.getElementById('leftCountdown')) {
            document.getElementById('leftCountdown').textContent = diff <= 0 ? 'Closed' : `${days}d ${hours}h ${minutes}m`;
        }
    }

    // Toggle rules sections
    function toggleRules(section) {
        const content = document.getElementById(`${section}Content`);
        const icon = document.getElementById(`${section}Icon`);
        
        content.classList.toggle('open');
        icon.classList.toggle('open');
    }

    // Show more description
    document.getElementById('showMoreBtn')?.addEventListener('click', function() {
        const descText = document.getElementById('descriptionText');
        descText.classList.toggle('collapsed');
        this.textContent = descText.classList.contains('collapsed') ? 'Show More' : 'Show Less';
    });

    // Registration modal functions
    function openRegistrationModal() {
        if (!currentUser) {
            window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
            return;
        }
        document.getElementById('registrationModal').classList.add('active');
    }

    function closeRegistrationModal() {
        document.getElementById('registrationModal').classList.remove('active');
        document.getElementById('registrationForm').reset();
        document.getElementById('paymentUploadSection').classList.remove('active');
    }

    function selectPayment(method) {
        // Remove selected class from all options
        document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('selected'));
        
        // Add selected class to chosen option
        const selectedOption = document.querySelector(`#payment${method.charAt(0).toUpperCase() + method.slice(1)}`).closest('.payment-option');
        selectedOption.classList.add('selected');
        
        // Show/hide upload section
        const uploadSection = document.getElementById('paymentUploadSection');
        if (method === 'bkash' || method === 'nagad') {
            uploadSection.classList.add('active');
        } else {
            uploadSection.classList.remove('active');
        }
    }

    // Handle file selection
    function handleFileSelect(event) {
        const file = event.target.files[0];
        if (!file) return;

        if (file.size > 2 * 1024 * 1024) {
            showToast('File size must be less than 2MB', 'error');
            event.target.value = '';
            return;
        }

        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('filePreview').innerHTML = `
                <img src="${e.target.result}" alt="Payment Screenshot" style="max-width: 100%; border-radius: 0.5rem;">
            `;
        };
        reader.readAsDataURL(file);
    }

    // Submit registration
    async function submitRegistration(event) {
        event.preventDefault();
        
        const teamName = document.getElementById('teamName').value.trim();
        const teamMembers = document.getElementById('teamMembers').value.trim();
        const contactPhone = document.getElementById('contactPhone').value.trim();
        const paymentMethod = document.querySelector('input[name="payment"]:checked')?.value;

        if (!teamName || !teamMembers || !contactPhone || !paymentMethod) {
            Utils.showToast('Please fill in all required fields', 'error');
            return;
        }

        if (!Utils.isValidBDPhone(contactPhone)) {
            Utils.showToast('Please enter a valid Bangladesh phone number', 'error');
            return;
        }

        const formData = {
            competition_id: currentCompetition.id,
            team_name: teamName,
            team_members: teamMembers,
            phone: contactPhone,
            payment_method: paymentMethod,
            registration_fee: currentCompetition.registration_fee
        };

        // Handle payment screenshots for bKash/Nagad
        if (paymentMethod === 'bkash' || paymentMethod === 'nagad') {
            const transactionId = document.getElementById('transactionId').value.trim();
            const screenshotFile = document.getElementById('paymentScreenshot').files[0];

            if (!transactionId) {
                Utils.showToast('Please provide transaction ID', 'error');
                return;
            }
            
            if (!screenshotFile) {
                Utils.showToast('Please upload payment screenshot', 'error');
                return;
            }

            formData.transaction_id = transactionId;
            
            // Convert screenshot to base64
            Utils.showLoading();
            try {
                console.log('Converting payment screenshot to base64...');
                
                // Read file as base64
                const base64Screenshot = await new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        console.log('File read successfully');
                        resolve(e.target.result);
                    };
                    reader.onerror = () => {
                        console.error('File read failed');
                        reject(new Error('Failed to read file'));
                    };
                    reader.readAsDataURL(screenshotFile);
                });
                
                console.log('Base64 conversion successful, length:', base64Screenshot.length);
                
                // Add to form data
                formData.payment_screenshot = base64Screenshot;
                
            } catch (error) {
                console.error('Screenshot processing error:', error);
                Utils.hideLoading();
                Utils.showToast(`Screenshot processing failed: ${error.message}`, 'error');
                return;
            }
        }

        // Submit registration
        try {
            const API_URL = (typeof window.CONFIG !== 'undefined') ? window.CONFIG.API_BASE_URL : 'http://localhost:3000/api';
            
            const response = await fetch(`${API_URL}/competitions/${currentCompetition.id}/register`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                },
                body: JSON.stringify(formData)
            });

            const data = await response.json();
            
            if (!response.ok) {
                throw new Error(data.message || 'Registration failed');
            }

            Utils.showToast('Registration submitted! Awaiting admin approval.', 'success');
            closeRegistrationModal();
            
            // Reload competition data
            setTimeout(() => loadCompetitionDetails(), 2000);
            
        } catch (error) {
            Utils.showToast(error.message, 'error');
        } finally {
            Utils.hideLoading();
        }
    }

    // Add to cart
    async function addToCart(productId) {
        console.log('=== ADD TO CART CLICKED ===');
        console.log('Product ID:', productId);
        console.log('Current User:', currentUser);
        
        if (!currentUser) {
            Utils.showToast('Please login to add items to cart', 'warning');
            setTimeout(() => {
                window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
            }, 1500);
            return;
        }

        Utils.showLoading();

        try {
            const API_URL = (typeof window.CONFIG !== 'undefined') ? window.CONFIG.API_BASE_URL : 'http://localhost:3000/api';
            
            console.log('Sending request to:', `${API_URL}/students/cart`);
            console.log('Request body:', { product_id: productId, quantity: 1 });
            
            const response = await fetch(`${API_URL}/students/cart`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                },
                body: JSON.stringify({ product_id: productId, quantity: 1 })
            });

            const data = await response.json();
            console.log('Response:', data);
            
            if (!response.ok) {
                throw new Error(data.message || 'Failed to add to cart');
            }

            Utils.showToast('Product added to cart!', 'success');
            await Utils.updateCartBadge();
            
        } catch (error) {
            console.error('Add to cart error:', error);
            Utils.showToast(error.message || 'Failed to add to cart', 'error');
        } finally {
            Utils.hideLoading();
        }
    }

    // Add all products to cart
    async function addAllToCart() {
        if (!currentUser) {
            window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
            return;
        }

        if (!currentCompetition.required_products || currentCompetition.required_products.length === 0) {
            return;
        }

        Utils.showLoading();
        let successCount = 0;

        for (const product of currentCompetition.required_products) {
            if (product.stock > 0) {
                try {
                    await addToCart(product.id);
                    successCount++;
                } catch (error) {
                    console.error(`Failed to add product ${product.id}:`, error);
                }
            }
        }

        Utils.hideLoading();
        Utils.showToast(`Added ${successCount} products to cart!`, 'success');
    }

    // Share functions
    function shareOnFacebook() {
        const url = encodeURIComponent(window.location.href);
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
    }

    function shareOnWhatsApp() {
        const text = encodeURIComponent(`Check out this competition: ${currentCompetition.title}`);
        const url = encodeURIComponent(window.location.href);
        window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
    }

    function shareOnTwitter() {
        const text = encodeURIComponent(`Check out this competition: ${currentCompetition.title}`);
        const url = encodeURIComponent(window.location.href);
        window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
    }

    function copyLink() {
        navigator.clipboard.writeText(window.location.href).then(() => {
            Utils.showToast('Link copied to clipboard!', 'success');
        });
    }

    // Helper functions
    function formatText(text) {
        return text.replace(/\n/g, '<br>');
    }

    
</script>
<script>
// Mobile menu toggle functionality
document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const navMenu = document.querySelector('.nav-menu');
    const body = document.body;

    if (mobileMenuToggle && navMenu) {
        mobileMenuToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            const isActive = navMenu.classList.toggle('active');
            mobileMenuToggle.classList.toggle('active');
            
            if (isActive) {
                body.style.overflow = 'hidden';
            } else {
                body.style.overflow = '';
            }
        });

        // Close menu when clicking nav link
        const navLinks = navMenu.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                navMenu.classList.remove('active');
                mobileMenuToggle.classList.remove('active');
                body.style.overflow = '';
            });
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            if (!navMenu.contains(e.target) && !mobileMenuToggle.contains(e.target)) {
                navMenu.classList.remove('active');
                mobileMenuToggle.classList.remove('active');
                body.style.overflow = '';
            }
        });

        // Handle escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && navMenu.classList.contains('active')) {
                navMenu.classList.remove('active');
                mobileMenuToggle.classList.remove('active');
                body.style.overflow = '';
            }
        });
    }
});
</script>
</body>
</html>