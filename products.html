<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - Nemionix Technologies | Engineering the Future, Today</title>
    <meta name="description" content="Browse and shop robotics components from verified university clubs across Bangladesh. Arduino, sensors, motors, and more - Nemionix Technologies.">
    
    <!-- Core Scripts -->
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/mobile-menu.js"></script>

    <!-- Main CSS -->
    <link rel="stylesheet" href="css/main.css">

    <!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">

<style>
    /* Page-specific styles only */
    .search-section {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0.75rem 1rem;
        position: sticky;
        top: 72px;
        z-index: 100;
        background: var(--gray-50);
    }
    
    @media (max-width: 768px) {
        .search-section {
            padding: 0.75rem 1rem;
            top: 60px;
        }
        
        .search-box {
            padding: 0.625rem 0.875rem;
        }
        
        .search-input {
            font-size: 0.875rem;
        }
        
        .voice-search-btn {
            display: none;
        }
    }
    
    @media (max-width: 768px) {
        .search-section {
            padding: 0.75rem 1rem;
            top: 60px;
        }
        
        .search-box {
            padding: 0.625rem 0.875rem;
        }
        
        .search-input {
            font-size: 0.875rem;
        }
        
        .voice-search-btn {
            display: none;
        }
    }
    
    .search-wrapper {
        max-width: 100%;
        margin: 0 auto;
        position: relative;
    }
    
    .search-box {
        position: relative;
        display: flex;
        align-items: center;
        background: white;
        border: 2px solid var(--gray-300);
        border-radius: var(--radius-xl);
        padding: 0.625rem 0.875rem;
        box-shadow: var(--shadow-md);
        transition: all 0.3s;
    }
    
    .search-box:focus-within {
        border-color: var(--primary-500);
        box-shadow: 0 0 0 4px rgba(25, 145, 235, 0.1), var(--shadow-xl);
    }
    
    .search-icon {
        color: var(--gray-400);
        font-size: 1.25rem;
        margin-right: var(--spacing-2);
    }
    
    .search-input {
        flex: 1;
        border: none;
        outline: none;
        font-size: 0.9375rem;
        color: var(--gray-900);
    }
    
    .search-input::placeholder {
        color: var(--gray-400);
    }
    
    .voice-search-btn {
        background: none;
        border: none;
        color: var(--gray-400);
        font-size: 1.5rem;
        cursor: not-allowed;
        opacity: 0.5;
    }
    
    .search-suggestions {
        position: absolute;
        top: calc(100% + var(--spacing-2));
        left: 0;
        right: 0;
        background: white;
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-xl);
        max-height: 300px;
        overflow-y: auto;
        display: none;
        z-index: 100;
    }
    
    .search-suggestions.active {
        display: block;
    }
    
    .suggestion-item {
        padding: var(--spacing-3) var(--spacing-4);
        cursor: pointer;
        transition: background 0.2s;
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        color: var(--gray-700);
    }
    
    .suggestion-item:hover {
        background: var(--gray-50);
    }
    
   /* Main Layout */
    .main-container {
        max-width: 1280px;
        margin: 2rem auto;
        padding: 0 1rem;
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: 1.5rem;
        align-items: flex-start;
    }
    
    /* Filters Sidebar */
    .filters-sidebar {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        height: fit-content;
        position: sticky;
        top: 90px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    @media (min-width: 1200px) {
        .filters-sidebar {
            display: block !important;
        }
    }
    
    .filter-handle {
        position: absolute;
        top: 8px;
        left: 50%;
        transform: translateX(-50%);
        width: 40px;
        height: 4px;
        background: var(--gray-300);
        border-radius: 2px;
        display: none;
    }
    
    @media (max-width: 1199px) {
        .filter-handle {
            display: block;
        }
        
        .filters-sidebar {
            padding-top: 2.5rem !important;
        }
    }
    
    .filters-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-6);
        padding: 0 1.5rem;
        position: sticky;
        top: 0;
        background: white;
        z-index: 10;
    }
    
    .filters-header h3 {
        font-family: var(--font-display);
        font-size: 1.25rem;
        font-weight: 700;
        margin: 0;
    }
    
    @media (max-width: 1199px) {
        .filters-header {
            padding-top: 1rem;
            padding-bottom: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .filters-header h3 {
            font-size: 1rem;
        }
    }
    
    .clear-filters {
        background: none;
        border: none;
        color: var(--primary-600);
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        padding: 0.375rem 0.5rem;
        border-radius: var(--radius-base);
    }
    
    .clear-filters:hover {
        color: var(--primary-700);
        background: var(--primary-50);
    }
    
    @media (max-width: 1199px) {
        .clear-filters {
            font-size: 0.8125rem;
        }
    }
    
    .filter-group {
        margin-bottom: var(--spacing-6);
        padding-bottom: var(--spacing-6);
        border-bottom: 1px solid var(--gray-200);
    }
    
    @media (max-width: 1199px) {
        .filter-group {
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
        }
    }
    
    .filter-group:last-child {
        border-bottom: none;
        padding-bottom: 0;
        margin-bottom: 0;
    }
    
    @media (max-width: 1199px) {
        .filter-group:last-child {
            margin-bottom: 0;
            padding-bottom: 0.5rem;
        }
    }
    
        .filter-title {
        font-weight: 700;
        margin-bottom: var(--spacing-3);
        color: var(--gray-900);
        font-size: 0.9375rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        user-select: none;
    }
    
    @media (max-width: 1199px) {
        .filter-title {
            font-size: 0.8125rem;
            margin-bottom: 0.5rem;
        }
    }
    
    .filter-title .toggle-icon {
        transition: transform 0.3s;
        font-size: 0.75rem;
    }
    
    .filter-title.collapsed .toggle-icon {
        transform: rotate(-90deg);
    }
    
    .filter-options {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-2);
    }
    
    @media (max-width: 1199px) {
        .filter-options {
            gap: 0.375rem;
        }
    }
    
    .filter-options.collapsed {
        display: none;
    }
    
    .checkbox-label,
    .radio-label {
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        cursor: pointer;
        font-size: 0.875rem;
        color: var(--gray-700);
        padding: var(--spacing-2);
        border-radius: var(--radius-base);
        transition: background 0.2s;
    }
    
    @media (max-width: 1199px) {
        .checkbox-label,
        .radio-label {
            padding: 0.25rem 0.5rem;
            font-size: 0.8125rem;
        }
    }
    
    .checkbox-label:hover,
    .radio-label:hover {
        background: var(--gray-50);
    }
    
    .checkbox-label input,
    .radio-label input {
        width: 18px;
        height: 18px;
        cursor: pointer;
        margin: 0;
    }
    
    .price-range {
        display: flex;
        gap: var(--spacing-2);
        margin-top: var(--spacing-3);
        width: 100%;
    }
    
    @media (max-width: 1199px) {
        .price-range {
            margin-top: 0.5rem;
            gap: 0.5rem;
        }
    }
    
    .price-input {
        flex: 1;
        min-width: 0;
        padding: var(--spacing-2);
        border: 1px solid var(--gray-300);
        border-radius: var(--radius-lg);
        font-size: 0.875rem;
    }
    
    .price-presets {
        display: flex;
        flex-wrap: wrap;
        gap: var(--spacing-2);
        margin-top: var(--spacing-3);
    }
    
    .price-preset {
        padding: var(--spacing-2) var(--spacing-3);
        background: var(--gray-100);
        border: 1px solid var(--gray-300);
        border-radius: var(--radius-lg);
        font-size: 0.75rem;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .price-preset:hover {
        background: var(--primary-100);
        border-color: var(--primary-500);
    }
    
@media (max-width: 1199px) {
        .filters-sidebar {
            position: fixed !important;
            top: 0 !important;
            left: -100% !important;
            height: 100vh !important;
            width: 100% !important;
            max-width: 100% !important;
            background: white !important;
            box-shadow: none !important;
            z-index: 10050 !important;
            transition: left 0.3s ease !important;
            overflow-y: auto !important;
            -webkit-overflow-scrolling: touch;
            padding: 1rem 1.5rem 1rem 1.5rem !important;
            border-radius: 0 !important;
            margin: 0 !important;
            display: block !important;
            border-right: none !important;
        }

        .filters-sidebar.active {
            left: 0 !important;
            box-shadow: none !important;
        }
        
        body.filter-open {
            overflow: hidden !important;
        }
    }
    
    @media (max-width: 640px) {
        .filters-sidebar {
            border-radius: 0 !important;
            height: 100vh !important;
            max-height: 100vh !important;
        }
    }
    
    @media (max-width: 480px) {
        .filters-sidebar {
            border-radius: 0 !important;
            height: 100vh !important;
            max-height: 100vh !important;
        }
    }
    
    /* Main Content */
    .main-content {
        min-height: 600px;
        overflow: visible;
        padding: 0;
        margin: 0;
    }
    
    .results-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-6);
        flex-wrap: wrap;
        gap: var(--spacing-4);
    }
    
    @media (max-width: 768px) {
        .results-bar {
            flex-direction: column;
            align-items: stretch;
            gap: var(--spacing-3);
        }
        
        .results-count {
            font-size: 0.875rem;
        }
        
        .results-controls {
            width: 100%;
            flex-wrap: wrap;
        }
        
        .sort-select,
        .grid-cols-select {
            flex: 1;
            min-width: 120px;
        }
        
        .view-toggle {
            order: -1;
            width: 100%;
            justify-content: center;
        }
    }
    
    .results-count {
        font-size: 0.9375rem;
        color: var(--gray-600);
    }
    
    .results-controls {
        display: flex;
        align-items: center;
        gap: var(--spacing-4);
    }
    
    .sort-select,
    .grid-cols-select {
        padding: var(--spacing-2) var(--spacing-3);
        border: 1px solid var(--gray-300);
        border-radius: var(--radius-lg);
        font-size: 0.875rem;
        background: white;
        cursor: pointer;
    }
    
    .view-toggle {
        display: flex;
        gap: var(--spacing-1);
        background: var(--gray-100);
        padding: var(--spacing-1);
        border-radius: var(--radius-lg);
    }
    
    .view-btn {
        background: none;
        border: none;
        padding: var(--spacing-2);
        cursor: pointer;
        border-radius: var(--radius-base);
        color: var(--gray-600);
        transition: all 0.2s;
    }
    
    .view-btn.active {
        background: white;
        color: var(--primary-600);
        box-shadow: var(--shadow-sm);
    }
    
    /* Products Grid */
    .products-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
        margin-bottom: var(--spacing-8);
    }
    
    .products-grid.cols-4 {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .products-grid.cols-5 {
        grid-template-columns: repeat(5, 1fr);
    }
    
    .products-grid.list-view {
        grid-template-columns: 1fr;
    }
    
    .products-grid.list-view .product-card {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: var(--spacing-6);
    }
    
    @media (max-width: 1199px) {
        .products-grid,
        .products-grid.cols-4,
        .products-grid.cols-5 {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 1rem;
        }
    }
    
    @media (max-width: 640px) {
        .products-grid,
        .products-grid.cols-4,
        .products-grid.cols-5 {
            grid-template-columns: 1fr !important;
            gap: 1rem;
        }
        
        .products-grid.list-view .product-card {
            grid-template-columns: 1fr;
        }
    }
    
    .products-grid.list-view .product-image-wrapper {
        aspect-ratio: 1;
    }
    
    /* Mobile Filter Button */
   .mobile-filter-btn {
    display: none;
    position: fixed;
    bottom: 1.75rem;
    right: 1.5rem;
    background: linear-gradient(135deg, var(--primary-500), var(--primary-700));
    color: white;
    border: none;
    padding: 1rem 1.75rem;
    border-radius: 3rem;
    font-weight: 700;
    font-size: 1rem;
    box-shadow: 0 8px 28px rgba(25, 145, 235, 0.45);
    cursor: pointer;
    z-index: 10048;
    align-items: center;
    gap: 0.625rem;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    min-height: 56px;
    min-width: 56px;
}

.mobile-filter-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 12px 36px rgba(25, 145, 235, 0.55);
}

.mobile-filter-btn:active {
    transform: scale(0.95);
}

.mobile-filter-btn.hidden {
    transform: translateY(120px) scale(0);
    opacity: 0;
    pointer-events: none;
}

.mobile-filter-btn svg {
    width: 20px;
    height: 20px;
}

@supports (padding: max(0px)) {
    .mobile-filter-btn {
        bottom: max(1.75rem, calc(1.75rem + env(safe-area-inset-bottom)));
        right: max(1.5rem, calc(1.5rem + env(safe-area-inset-right)));
    }
}
    
    .filter-close-btn {
        display: none;
        position: absolute;
        top: 1.25rem;
        right: 1.5rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: white;
        border: 2px solid var(--gray-200);
        cursor: pointer;
        align-items: center;
        justify-content: center;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 11;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
        min-width: 40px;
        min-height: 40px;
    }

    .filter-close-btn:hover {
        background: var(--error);
        border-color: var(--error);
        transform: rotate(90deg);
    }
    
    .filter-close-btn:hover svg {
        stroke: white;
    }
    
    .filter-close-btn svg {
        stroke: var(--gray-700);
        stroke-width: 2.5;
        transition: stroke 0.3s;
    }
    
    @media (max-width: 640px) {
        .filter-close-btn {
            top: 1rem;
            right: 1rem;
            width: 36px;
            height: 36px;
            min-width: 36px;
            min-height: 36px;
        }
    }
    
    @media (max-width: 1199px) {
        .mobile-filter-btn {
            display: flex !important;
            z-index: 10003 !important;
        }
        
        .filter-close-btn {
            display: flex !important;
            z-index: 10004 !important;
        }
        
        .main-container {
            grid-template-columns: 1fr;
        }
        
        .filters-sidebar {
            display: block;
        }
    }
    
    @media (max-width: 768px) {
        .mobile-filter-btn {
            bottom: 1rem;
            right: 1rem;
            padding: 0.875rem 1.25rem;
            font-size: 0.9375rem;
        }
        
        .results-bar {
            flex-direction: column;
            align-items: stretch;
            gap: var(--spacing-3);
        }
        
        .results-count {
            font-size: 0.875rem;
        }
        
        .results-controls {
            width: 100%;
            flex-wrap: wrap;
        }
        
        .sort-select,
        .grid-cols-select {
            flex: 1;
            min-width: 120px;
        }
        
        .view-toggle {
            order: -1;
            width: 100%;
            justify-content: center;
        }
    }
    
    @media (max-width: 1199px) {
        .mobile-filter-btn {
            display: flex !important;
        }
    }
    
    @media (max-width: 768px) {
        .mobile-filter-btn {
            bottom: 1rem;
            right: 1rem;
            padding: 0.875rem 1.25rem;
            font-size: 0.9375rem;
        }
    }
    
    .mobile-filter-btn .filter-count-badge {
        background: white;
        color: var(--primary-600);
        padding: 2px 8px;
        border-radius: var(--radius-full);
        margin-left: var(--spacing-2);
        font-size: 0.875rem;
    }
    
    /* Responsive Design */
    @media (max-width: 1199px) {
        .main-container {
            grid-template-columns: 1fr;
        }
        
        .filters-sidebar {
            display: none;
        }
        
        .mobile-filter-btn {
            display: flex !important;
        }
        
        .products-grid {
            grid-template-columns: repeat(2, 1fr) !important;
        }
        
        .products-grid.cols-4,
        .products-grid.cols-5 {
            grid-template-columns: repeat(2, 1fr) !important;
        }
        
        
        
        
    }
    
    @media (max-width: 768px) {
        .products-grid,
        .products-grid.cols-4,
        .products-grid.cols-5 {
            grid-template-columns: 1fr !important;
        }
        
        .results-bar {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .results-controls {
            width: 100%;
            justify-content: space-between;
        }
    }
    /* Filter Backdrop for Products */
    .filter-backdrop-products {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        z-index: 10040;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .filter-backdrop-products.active {
        display: block;
        opacity: 1;
    }
    /* Breadcrumb Fixes */
    .breadcrumb {
        background: white;
        border-bottom: 1px solid var(--gray-200);
        padding: 1rem 0;
    }

    .breadcrumb .container {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
    }

    .breadcrumb a {
        color: var(--gray-600);
        text-decoration: none;
        transition: color 0.2s;
    }

    .breadcrumb a:hover {
        color: var(--primary-500);
    }

    .breadcrumb-separator {
        color: var(--gray-400);
        user-select: none;
    }

    .breadcrumb-current {
        color: var(--gray-900);
        font-weight: 500;
    }

    /* Page Header */
    .page-header {
        background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-700) 100%);
        padding: 3rem 0;
        text-align: center;
        color: white;
        position: relative;
        overflow: hidden;
    }

    .page-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: 
            radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
        pointer-events: none;
    }

    .page-header .container {
        position: relative;
        z-index: 1;
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 1.5rem;
    }

    .page-header h1 {
        font-family: var(--font-display);
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 0.75rem;
        color: white;
    }

    .page-header p {
        font-size: 1.125rem;
        color: rgba(255, 255, 255, 0.95);
        max-width: 700px;
        margin: 0 auto;
    }
    
    @media (max-width: 768px) {
        .page-header {
            padding: 2rem 0;
        }
        
        .page-header h1 {
            font-size: 1.75rem;
        }
        
        .page-header p {
            font-size: 0.9375rem;
        }
    }
    /* Mobile Filter Sidebar - Additional Styles */
    @media (max-width: 1199px) {
        .filters-sidebar .filter-group:first-of-type {
            margin-top: 0.5rem;
        }
    }
    
    .filter-sheet-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-6);
        padding-bottom: var(--spacing-4);
        border-bottom: 1px solid var(--gray-200);
    }

    .filter-sheet-header h3 {
        font-family: var(--font-display);
        font-size: 1.25rem;
        font-weight: 700;
    }

    .filter-sheet-actions {
        display: flex;
        gap: var(--spacing-3);
        margin-top: var(--spacing-6);
        position: sticky;
        bottom: 0;
        background: white;
        padding: var(--spacing-4) 0;
        border-top: 1px solid var(--gray-200);
    }

    .filter-sheet-actions .btn {
        flex: 1;
    }

    /* Quick View Modal */
    .modal-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: var(--spacing-4);
        backdrop-filter: blur(4px);
    }

    .modal-overlay.active {
        display: flex;
    }

    .quick-view-modal {
        background: white;
        border-radius: var(--radius-2xl);
        max-width: 900px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-6);
        border-bottom: 1px solid var(--gray-200);
    }

    .modal-header h3 {
        font-family: var(--font-display);
        font-size: 1.5rem;
        font-weight: 700;
    }

    .modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--gray-600);
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-base);
        transition: background 0.2s;
    }

    .modal-close:hover {
        background: var(--gray-100);
    }

    .modal-body {
        padding: var(--spacing-6);
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-6);
    }
    
    @media (max-width: 768px) {
        .modal-body {
            grid-template-columns: 1fr;
            padding: var(--spacing-4);
            gap: var(--spacing-4);
        }
        
        .modal-main-image {
            max-height: 300px;
        }
    }

    .modal-images {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-3);
    }

    .modal-main-image {
        width: 100%;
        aspect-ratio: 1;
        object-fit: cover;
        border-radius: var(--radius-xl);
        background: var(--gray-100);
    }

    .modal-thumbnails {
        display: flex;
        gap: var(--spacing-2);
        overflow-x: auto;
    }

    .modal-thumbnail {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: var(--radius-lg);
        cursor: pointer;
        border: 2px solid transparent;
        transition: all 0.2s;
        flex-shrink: 0;
    }

    .modal-thumbnail:hover,
    .modal-thumbnail.active {
        border-color: var(--primary-500);
    }

    .modal-details h2 {
        font-family: var(--font-display);
        font-size: 1.5rem;
        margin-bottom: var(--spacing-3);
    }

    .specs-table {
        width: 100%;
        margin: var(--spacing-4) 0;
        border: 1px solid var(--gray-200);
        border-radius: var(--radius-lg);
        overflow: hidden;
    }

    .specs-table tr {
        border-bottom: 1px solid var(--gray-200);
    }

    .specs-table tr:last-child {
        border-bottom: none;
    }

    .specs-table td {
        padding: var(--spacing-3);
    }

    .specs-table td:first-child {
        font-weight: 600;
        background: var(--gray-50);
        width: 40%;
    }

    /* Product Cards */
    .product-card {
        background: white;
        border-radius: var(--radius-xl);
        overflow: hidden;
        box-shadow: var(--shadow-base);
        transition: all 0.3s;
        position: relative;
        display: flex;
        flex-direction: column;
        cursor: pointer;
        width: 100%;
    }
    
    .product-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-xl);
    }
    
    .product-image-wrapper {
        position: relative;
        aspect-ratio: 4/3;
        overflow: hidden;
        background: var(--gray-100);
    }
    
    .product-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s;
    }
    
    .product-card:hover .product-image {
        transform: scale(1.05);
    }
    
    .discount-badge {
        position: absolute;
        top: var(--spacing-2);
        right: var(--spacing-2);
        background: linear-gradient(135deg, var(--accent-500), var(--accent-700));
        color: white;
        padding: var(--spacing-1) var(--spacing-2);
        border-radius: var(--radius-lg);
        font-size: 0.75rem;
        font-weight: 700;
        box-shadow: var(--shadow-md);
        z-index: 1;
    }
    
    .condition-badge {
        position: absolute;
        top: var(--spacing-2);
        left: var(--spacing-2);
        background: var(--success);
        color: white;
        padding: var(--spacing-1) var(--spacing-2);
        border-radius: var(--radius-lg);
        font-size: 0.75rem;
        font-weight: 600;
        z-index: 1;
    }
    
    .out-of-stock-overlay {
        position: absolute;
        inset: 0;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.125rem;
        color: var(--error);
        z-index: 2;
    }
    
    .quick-view-btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        border: none;
        padding: var(--spacing-3);
        border-radius: var(--radius-full);
        cursor: pointer;
        opacity: 0;
        transition: opacity 0.3s;
        box-shadow: var(--shadow-lg);
        z-index: 3;
        font-size: 1.25rem;
    }
    
    .product-card:hover .quick-view-btn {
        opacity: 1;
    }
    
    .product-content {
        padding: var(--spacing-4);
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-2);
    }
    
    @media (max-width: 768px) {
        .product-content {
            padding: var(--spacing-3);
            gap: var(--spacing-1);
        }
        
        .product-name {
            font-size: 0.875rem;
            min-height: 2.4em;
        }
        
        .current-price {
            font-size: 1.25rem;
        }
        
        .add-to-cart-btn {
            padding: var(--spacing-2) var(--spacing-3);
            font-size: 0.875rem;
        }
    }
    
    .product-name {
        font-weight: 600;
        font-size: 0.9375rem;
        margin-bottom: var(--spacing-1);
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        color: var(--gray-900);
        line-height: 1.4;
        min-height: 2.8em;
    }
    
    .club-info {
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        font-size: 0.8125rem;
        color: var(--gray-600);
        margin-bottom: var(--spacing-1);
    }
    
    .club-info img {
        width: 20px;
        height: 20px;
        border-radius: var(--radius-base);
        object-fit: cover;
        flex-shrink: 0;
    }
    
    .club-info span {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
    
    .rating {
        display: flex;
        align-items: center;
        gap: var(--spacing-1);
        font-size: 0.875rem;
        margin-bottom: var(--spacing-2);
    }
    
    .stars {
        color: #FFC107;
        display: flex;
        align-items: center;
        gap: 1px;
    }
    
    .review-count {
        color: var(--gray-500);
        font-size: 0.8125rem;
    }
    
    .price-section {
        margin-bottom: var(--spacing-2);
        display: flex;
        align-items: baseline;
        gap: var(--spacing-2);
        flex-wrap: wrap;
    }
    
    .current-price {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--gray-900);
        font-family: var(--font-display);
    }
    
    .original-price {
        font-size: 0.9375rem;
        color: var(--gray-500);
        text-decoration: line-through;
    }
    
    .stock-warning {
        font-size: 0.8125rem;
        color: var(--warning);
        font-weight: 600;
        margin-bottom: var(--spacing-2);
        display: flex;
        align-items: center;
        gap: var(--spacing-1);
    }
    
    .add-to-cart-btn {
        width: 100%;
        margin-top: auto;
        padding: var(--spacing-3) var(--spacing-4);
        font-size: 0.9375rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-2);
    }
    
    .add-to-cart-btn:disabled {
        background: var(--gray-300);
        cursor: not-allowed;
        opacity: 0.6;
    }
    
    /* Skeleton Loading Cards */
    .skeleton-card {
        background: white;
        border-radius: var(--radius-xl);
        overflow: hidden;
        box-shadow: var(--shadow-base);
    }
    
    .skeleton-image {
        aspect-ratio: 1;
        background: linear-gradient(90deg, var(--gray-200) 25%, var(--gray-100) 50%, var(--gray-200) 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
    }
    
    .skeleton-content {
        padding: var(--spacing-4);
    }
    
    .skeleton-line {
        height: 16px;
        background: linear-gradient(90deg, var(--gray-200) 25%, var(--gray-100) 50%, var(--gray-200) 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        border-radius: var(--radius-base);
        margin-bottom: var(--spacing-2);
    }
    
    .skeleton-line.short {
        width: 60%;
    }
    
    @keyframes shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }
    
    /* Empty State */
    .empty-state {
        text-align: center;
        padding: var(--spacing-16) var(--spacing-6);
        grid-column: 1 / -1;
    }
    
    .empty-state-icon {
        font-size: 4rem;
        color: var(--gray-300);
        margin-bottom: var(--spacing-4);
    }
    
    .empty-state h3 {
        font-family: var(--font-display);
        font-size: 1.5rem;
        margin-bottom: var(--spacing-2);
        color: var(--gray-700);
    }
    
    .empty-state p {
        color: var(--gray-600);
        margin-bottom: var(--spacing-6);
    }
    
    /* Pagination */
    .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: var(--spacing-2);
        margin-top: var(--spacing-8);
    }
    
    .page-btn {
        padding: var(--spacing-2) var(--spacing-4);
        border: 1px solid var(--gray-300);
        background: white;
        border-radius: var(--radius-lg);
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 600;
        font-size: 0.9375rem;
    }
    
    .page-btn:hover:not(:disabled) {
        background: var(--primary-50);
        border-color: var(--primary-500);
    }
    
    .page-btn.active {
        background: linear-gradient(135deg, var(--primary-500), var(--primary-700));
        color: white;
        border-color: var(--primary-500);
    }
    
    .page-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
</style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <!-- Logo -->
                <a href="index.html" class="logo">
                    <div class="logo-icon">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="40" height="40" rx="8" fill="url(#gradient)"/>
                            <path d="M20 10L28 16V24L20 30L12 24V16L20 10Z" fill="white" opacity="0.9"/>
                            <circle cx="20" cy="20" r="3" fill="white"/>
                            <defs>
                                <linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40">
                                    <stop offset="0%" stop-color="#1991EB"/>
                                    <stop offset="100%" stop-color="#0F578D"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <span class="logo-name">Nemionix Technologies</span>
                        <span class="logo-tagline">Engineering the Future, Today</span>
                    </div>
                </a>

                <!-- Desktop Menu -->
                <div class="nav-menu">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="competitions.html" class="nav-link">Competitions</a>
                    <a href="products.html" class="nav-link active">Products</a>
                    <a href="clubs.html" class="nav-link">Clubs</a>
                    <a href="about.html" class="nav-link">About</a>
                    <a href="how-it-works.html" class="nav-link">How It Works</a>
                </div>

                <!-- Auth Buttons -->
                <div class="nav-actions">
                    <button class="cart-btn" onclick="window.location.href='cart.html'">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span class="cart-badge" id="cartBadge">0</span>
                    </button>
                    <a href="login.html" class="btn btn-secondary">Login</a>
                    <a href="signup.html" class="btn btn-primary">Sign Up</a>
                    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

<!-- Breadcrumb -->
    <div class="breadcrumb">
        <div class="container">
            <a href="index.html">Home</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-current">Products</span>
        </div>
    </div>

<!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <h1>Robotics Components Marketplace</h1>
            <p id="pageSubtitle">Browse authentic components from verified university clubs</p>
        </div>
    </div>

<!-- Search Section -->
<section class="search-section">
    <div class="search-wrapper">
        <div class="search-box">
            <span class="search-icon">üîç</span>
            <input 
                type="text" 
                class="search-input" 
                id="searchInput"
                placeholder="Search for Arduino, sensors, motors, ESP32..."
                autocomplete="off"
            >
            <button class="voice-search-btn" disabled title="Voice search coming soon">üé§</button>
        </div>
        <div class="search-suggestions" id="searchSuggestions"></div>
    </div>
</section>

<!-- Main Container -->
<div class="main-container">
    <!-- Filters Sidebar -->
    <aside class="filters-sidebar" id="filtersSidebar">
        <div class="filter-handle"></div>
        <button class="filter-close-btn" onclick="closeFilterSheet()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </button>
        <div class="filters-header">
            <h3>Filters</h3>
            <button class="clear-filters" onclick="clearAllFilters()">Clear All</button>
        </div>

        <!-- Category Filter -->
        <div class="filter-group">
            <div class="filter-title">
                <span>Category</span>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="filter-options" id="categoryFilters">
                <label class="checkbox-label">
                    <input type="checkbox" value="Microcontrollers" onchange="applyFilters()">
                    <span>Microcontrollers <span style="color: var(--gray-400);">(45)</span></span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" value="Sensors" onchange="applyFilters()">
                    <span>Sensors <span style="color: var(--gray-400);">(68)</span></span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" value="Motors & Drivers" onchange="applyFilters()">
                    <span>Motors & Drivers <span style="color: var(--gray-400);">(52)</span></span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" value="Power & Battery" onchange="applyFilters()">
                    <span>Power & Battery <span style="color: var(--gray-400);">(34)</span></span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" value="Communication" onchange="applyFilters()">
                    <span>Communication <span style="color: var(--gray-400);">(29)</span></span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" value="Displays" onchange="applyFilters()">
                    <span>Displays <span style="color: var(--gray-400);">(41)</span></span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" value="Tools & Equipment" onchange="applyFilters()">
                    <span>Tools & Equipment <span style="color: var(--gray-400);">(23)</span></span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" value="Mechanical Parts" onchange="applyFilters()">
                    <span>Mechanical Parts <span style="color: var(--gray-400);">(38)</span></span>
                </label>
            </div>
        </div>

        <!-- Price Range Filter -->
        <div class="filter-group">
            <div class="filter-title">
                <span>Price Range</span>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="filter-options">
                <div class="price-range">
                    <input type="number" class="price-input" id="priceMin" placeholder="Min" onchange="applyFilters()">
                    <input type="number" class="price-input" id="priceMax" placeholder="Max" onchange="applyFilters()">
                </div>
                <div class="price-presets">
                    <button class="price-preset" onclick="setPriceRange(0, 100)">Under ‡ß≥100</button>
                    <button class="price-preset" onclick="setPriceRange(100, 500)">‡ß≥100-‡ß≥500</button>
                    <button class="price-preset" onclick="setPriceRange(500, 1000)">‡ß≥500-‡ß≥1000</button>
                    <button class="price-preset" onclick="setPriceRange(1000, 5000)">‡ß≥1000-‡ß≥5000</button>
                    <button class="price-preset" onclick="setPriceRange(5000, null)">Above ‡ß≥5000</button>
                </div>
            </div>
        </div>

        <!-- Rating Filter -->
        <div class="filter-group">
            <div class="filter-title">
                <span>Rating</span>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="filter-options">
                <label class="radio-label">
                    <input type="radio" name="rating" value="5" onchange="applyFilters()">
                    <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 stars only</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="rating" value="4" onchange="applyFilters()">
                    <span>‚≠ê‚≠ê‚≠ê‚≠ê 4 stars & above</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="rating" value="3" onchange="applyFilters()">
                    <span>‚≠ê‚≠ê‚≠ê 3 stars & above</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="rating" value="0" checked onchange="applyFilters()">
                    <span>Any rating</span>
                </label>
            </div>
        </div>

        <!-- Condition Filter -->
        <div class="filter-group">
            <div class="filter-title">
                <span>Condition</span>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="filter-options">
                <label class="radio-label">
                    <input type="radio" name="condition" value="all" checked onchange="applyFilters()">
                    <span>All</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="condition" value="new" onchange="applyFilters()">
                    <span>New only</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="condition" value="used" onchange="applyFilters()">
                    <span>Used only</span>
                </label>
            </div>
        </div>

        <!-- Stock Status Filter -->
        <div class="filter-group">
            <div class="filter-title">
                <span>Availability</span>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="filter-options">
                <label class="checkbox-label">
                    <input type="checkbox" id="inStockOnly" onchange="applyFilters()">
                    <span>In Stock Only</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="onSaleOnly" onchange="applyFilters()">
                    <span>On Sale</span>
                </label>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Results Bar -->
        <div class="results-bar">
            <div class="results-count" id="resultsCount">Loading...</div>
            <div class="results-controls">
                <select class="sort-select" id="sortSelect" onchange="applyFilters()">
                    <option value="relevance">Sort: Relevance</option>
                    <option value="price_asc">Price: Low to High</option>
                    <option value="price_desc">Price: High to Low</option>
                    <option value="newest">Newest First</option>
                    <option value="best_selling">Best Selling</option>
                    <option value="highest_rated">Highest Rated</option>
                </select>
                
                <div class="view-toggle">
                    <button class="view-btn active" onclick="setView('grid')" id="gridViewBtn">
                        <span style="font-size: 1.25rem;">‚ñ¶</span>
                    </button>
                    <button class="view-btn" onclick="setView('list')" id="listViewBtn">
                        <span style="font-size: 1.25rem;">‚ò∞</span>
                    </button>
                </div>
                
                <select class="grid-cols-select" id="gridColsSelect" onchange="setGridColumns(this.value)">
                    <option value="3" selected>3 Columns</option>
                    <option value="4">4 Columns</option>
                    <option value="5">5 Columns</option>
                </select>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="products-grid" id="productsGrid">
            <!-- Products will be loaded here -->
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination"></div>
    </main>
</div>

<!-- Mobile Filter Button -->
<button class="mobile-filter-btn" onclick="openFilterSheet()">
    üîß Filters
    <span class="filter-count-badge" id="filterCountBadge">0</span>
</button>

<!-- Mobile filter handled by main sidebar -->

<!-- Quick View Modal -->
<div class="modal-overlay" id="quickViewModal">
    <div class="quick-view-modal">
        <div class="modal-header">
            <h3>Quick View</h3>
            <button class="modal-close" onclick="closeQuickView()">‚úï</button>
        </div>
        <div class="modal-body" id="modalBody">
            <!-- Content loaded dynamically -->
        </div>
    </div>
</div>

<!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <!-- About Column -->
                <div class="footer-column">
                    <div class="footer-logo">
                        <svg width="36" height="36" viewBox="0 0 40 40" fill="none">
                            <rect width="40" height="40" rx="8" fill="url(#footerGradient)"/>
                            <path d="M20 10L28 16V24L20 30L12 24V16L20 10Z" fill="white" opacity="0.9"/>
                            <circle cx="20" cy="20" r="3" fill="white"/>
                            <defs>
                                <linearGradient id="footerGradient" x1="0" y1="0" x2="40" y2="40">
                                    <stop offset="0%" stop-color="#1991EB"/>
                                    <stop offset="100%" stop-color="#0F578D"/>
                                </linearGradient>
                            </defs>
                        </svg>
                        <span>Nemionix Technologies</span>
                    </div>
                    <p class="footer-tagline">Engineering the Future</p>
                    <p class="footer-description">Bangladesh's premier robotics marketplace connecting students, clubs, and innovation through cutting-edge technology.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M20 10C20 4.477 15.523 0 10 0S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z"/>
                            </svg>
                        </a>
                        <a href="#" aria-label="Instagram">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 0C7.284 0 6.944.012 5.877.06 4.813.109 4.086.278 3.45.525a4.88 4.88 0 00-1.771 1.154A4.908 4.908 0 00.525 3.45C.278 4.086.109 4.813.06 5.877.012 6.944 0 7.284 0 10s.012 3.056.06 4.123c.049 1.064.218 1.791.465 2.427a4.883 4.883 0 001.154 1.771 4.915 4.915 0 001.771 1.154c.636.247 1.363.416 2.427.465C6.944 19.988 7.284 20 10 20s3.056-.012 4.123-.06c1.064-.049 1.791-.218 2.427-.465a4.89 4.89 0 001.771-1.154 4.904 4.904 0 001.154-1.771c.247-.636.416-1.363.465-2.427C19.988 13.056 20 12.716 20 10s-.012-3.056-.06-4.123c-.049-1.064-.218-1.791-.465-2.427a4.893 4.893 0 00-1.154-1.771A4.886 4.886 0 0016.55.525C15.914.278 15.187.109 14.123.06 13.056.012 12.716 0 10 0zm0 1.802c2.67 0 2.987.01 4.041.059.976.045 1.505.207 1.858.344.466.182.8.399 1.15.748.35.35.566.684.748 1.15.137.353.3.882.344 1.857.048 1.055.058 1.37.058 4.04 0 2.671-.01 2.986-.058 4.041-.045.976-.207 1.505-.344 1.858a3.097 3.097 0 01-.748 1.15c-.35.35-.684.566-1.15.748-.353.137-.882.3-1.857.344-1.054.048-1.37.058-4.041.058-2.67 0-2.987-.01-4.04-.058-.976-.045-1.505-.207-1.858-.344a3.098 3.098 0 01-1.15-.748 3.098 3.098 0 01-.748-1.15c-.137-.353-.3-.882-.344-1.857-.048-1.055-.058-1.37-.058-4.041 0-2.67.01-2.986.058-4.04.045-.976.207-1.505.344-1.858.182-.466.399-.8.748-1.15.35-.35.684-.566 1.15-.748.353-.137.882-.3 1.857-.344 1.055-.048 1.37-.058 4.041-.058zM10 13.333A3.333 3.333 0 1110 6.667a3.333 3.333 0 010 6.666zm0-8.468a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm6.538-.203a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z"/>
                            </svg>
                        </a>
                        <a href="mailto:support@nemionix.com" aria-label="Email">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="footer-column">
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="competitions.html">Competitions</a></li>
                        <li><a href="clubs.html">Clubs</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="how-it-works.html">How It Works</a></li>
                    </ul>
                </div>

                <!-- For Students -->
                <div class="footer-column">
                    <h3 class="footer-heading">For Students</h3>
                    <ul class="footer-links">
                        <li><a href="signup.html?role=student">Sign Up</a></li>
                        <li><a href="products.html">Browse Products</a></li>
                        <li><a href="competitions.html">Find Competitions</a></li>
                        <li><a href="my-orders.html">Track Orders</a></li>
                        <li><a href="my-registrations.html">My Registrations</a></li>
                    </ul>
                </div>

                <!-- For Clubs -->
                <div class="footer-column">
                    <h3 class="footer-heading">For Clubs</h3>
                    <ul class="footer-links">
                        <li><a href="signup.html?role=club_admin">Become a Seller</a></li>
                        <li><a href="create-competition.html">Create Competition</a></li>
                        <li><a href="reward-status.html">Reward System</a></li>
                        <li><a href="my-earnings.html">Earnings Dashboard</a></li>
                        <li><a href="clubs.html">View Leaderboard</a></li>
                    </ul>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p class="copyright">&copy; 2025 Nemionix Technologies. All rights reserved.</p>
                    <div class="footer-bottom-links">
                        <a href="#">Terms of Service</a>
                        <span class="separator">‚Ä¢</span>
                        <a href="#">Privacy Policy</a>
                        <span class="separator">‚Ä¢</span>
                        <a href="mailto:support@nemionix.com">Support</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

<script>
    // Products will be loaded from API
    let mockProducts = [
        {
            id: 1,
            name: "Arduino Uno R3 Original",
            slug: "arduino-uno-r3-original",
            category: "Microcontrollers",
            price: 650,
            original_price: 800,
            stock: 18,
            condition: "new",
            club_name: "GRRC",
            club_logo: "https://via.placeholder.com/40",
            rating: 4.8,
            review_count: 24,
            images: ["/assets/default-product.png"],
            description: "Original Arduino Uno R3 with ATmega328P microcontroller. Perfect for beginners and advanced projects."
        },
        {
            id: 2,
            name: "HC-SR04 Ultrasonic Sensor",
            slug: "hc-sr04-ultrasonic-sensor",
            category: "Sensors",
            price: 120,
            original_price: null,
            stock: 45,
            condition: "new",
            club_name: "BUET Robotics",
            club_logo: "https://via.placeholder.com/40",
            rating: 4.5,
            review_count: 18,
            images: ["/assets/default-product.png"],
            description: "Distance measuring sensor with 2cm-400cm range. Widely used in robotics."
        },
        {
            id: 3,
            name: "SG90 Micro Servo Motor",
            slug: "sg90-micro-servo-motor",
            category: "Motors & Drivers",
            price: 180,
            original_price: 220,
            stock: 3,
            condition: "new",
            club_name: "NSU Robotics",
            club_logo: "https://via.placeholder.com/40",
            rating: 4.6,
            review_count: 32,
            images: ["/assets/default-product.png"],
            description: "Lightweight servo motor with 180-degree rotation. Ideal for small robots."
        },
        {
            id: 4,
            name: "ESP32 Development Board",
            slug: "esp32-development-board",
            category: "Microcontrollers",
            price: 550,
            original_price: 700,
            stock: 0,
            condition: "new",
            club_name: "DIU Robotics",
            club_logo: "https://via.placeholder.com/40",
            rating: 4.9,
            review_count: 41,
            images: ["/assets/default-product.png"],
            description: "WiFi and Bluetooth enabled microcontroller. Perfect for IoT projects."
        },
        {
            id: 5,
            name: "L298N Motor Driver Module",
            slug: "l298n-motor-driver",
            category: "Motors & Drivers",
            price: 280,
            original_price: null,
            stock: 27,
            condition: "new",
            club_name: "GRRC",
            club_logo: "https://via.placeholder.com/40",
            rating: 4.7,
            review_count: 19,
            images: ["/assets/default-product.png"],
            description: "Dual H-bridge motor driver for controlling DC motors and stepper motors."
        },
        {
            id: 6,
            name: "16x2 LCD Display Module",
            slug: "16x2-lcd-display",
            category: "Displays",
            price: 240,
            original_price: null,
            stock: 15,
            condition: "new",
            club_name: "BUET Robotics",
            club_logo: "https://via.placeholder.com/40",
            rating: 4.4,
            review_count: 22,
            images: ["/assets/default-product.png"],
            description: "Blue backlight LCD display with 16 characters and 2 rows."
        }
    ];

    // State Management
    let currentPage = 1;
    let currentView = 'grid';
    let gridColumns = 3;
    let filterState = {
        search: '',
        categories: [],
        priceMin: null,
        priceMax: null,
        rating: 0,
        condition: 'all',
        inStockOnly: false,
        onSaleOnly: false,
        sortBy: 'relevance',
        clubs: []
    };

    let allProducts = [];
    let filteredProducts = [];
    let isLoading = false;

    // Initialize apiClient
    const apiClient = window.apiClient || {
        get: async (url) => {
            const API_BASE = window.CONFIG ? window.CONFIG.API_BASE_URL : 'http://localhost:3000/api';
            const token = localStorage.getItem('token');
            const response = await fetch(`${API_BASE}${url}`, {
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': token ? `Bearer ${token}` : ''
                }
            });
            if (!response.ok) throw new Error('Request failed');
            return response.json();
        },
        post: async (url, data) => {
            const API_BASE = window.CONFIG ? window.CONFIG.API_BASE_URL : 'http://localhost:3000/api';
            const token = localStorage.getItem('token');
            const response = await fetch(`${API_BASE}${url}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': token ? `Bearer ${token}` : ''
                },
                body: JSON.stringify(data)
            });
            if (!response.ok) throw new Error('Request failed');
            return response.json();
        }
    };

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
        initializePage();
    });

    async function initializePage() {
        // Update cart badge
        updateCartBadge();
        
        // Check auth
        checkAuth();
        
        // Load filters from URL
        loadFiltersFromURL();
        
        // Setup event listeners
        setupEventListeners();
        
        // Load products
        await loadProducts();
        
        // Setup filter collapse toggles
        setupFilterToggles();
    }

    function checkAuth() {
        // This functionality should be handled by auth.js
        // Remove this function or keep it minimal
    }

    async function updateCartBadge() {
        try {
            const token = localStorage.getItem('token');
            if (!token) {
                document.getElementById('cartBadge').textContent = '0';
                return;
            }
            
            const response = await apiClient.get('/students/cart');
            
            let totalItems = 0;
            if (response.success && response.data && response.data.items) {
                totalItems = response.data.items.reduce((sum, item) => sum + (item.quantity || 0), 0);
            }
            
            const badge = document.getElementById('cartBadge');
            badge.textContent = totalItems;
            badge.style.display = totalItems > 0 ? 'block' : 'none';
        } catch (error) {
            console.error('Error updating cart badge:', error);
            document.getElementById('cartBadge').textContent = '0';
        }
    }

    function setupEventListeners() {
        // Search input
        const searchInput = document.getElementById('searchInput');
        let searchTimeout;
        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                filterState.search = e.target.value;
                applyFilters();
            }, 300);
        });

        // Search suggestions
        searchInput.addEventListener('focus', () => {
            if (searchInput.value.length > 0) {
                showSearchSuggestions(searchInput.value);
            }
        });

        searchInput.addEventListener('blur', () => {
            setTimeout(() => {
                document.getElementById('searchSuggestions').classList.remove('active');
            }, 200);
        });
    }

    function setupFilterToggles() {
        const filterTitles = document.querySelectorAll('.filter-title');
        filterTitles.forEach(title => {
            title.addEventListener('click', () => {
                title.classList.toggle('collapsed');
                const options = title.nextElementSibling;
                options.classList.toggle('collapsed');
            });
        });
    }

    async function showSearchSuggestions(query) {
        if (query.length < 2) return;
        
        const suggestions = [
            'Arduino Uno',
            'Ultrasonic Sensor',
            'Servo Motor',
            'ESP32',
            'Raspberry Pi',
            'Motor Driver',
            'LCD Display',
            'Power Supply'
        ].filter(s => s.toLowerCase().includes(query.toLowerCase()));

        const suggestionsEl = document.getElementById('searchSuggestions');
        suggestionsEl.innerHTML = suggestions.map(s => `
            <div class="suggestion-item" onclick="applySuggestion('${s}')">
                <span>üîç</span>
                <span>${s}</span>
            </div>
        `).join('');
        
        if (suggestions.length > 0) {
            suggestionsEl.classList.add('active');
        }
    }

    function applySuggestion(text) {
        document.getElementById('searchInput').value = text;
        filterState.search = text;
        applyFilters();
    }

    function loadFiltersFromURL() {
        const params = new URLSearchParams(window.location.search);
        
        filterState.search = params.get('search') || '';
        if (filterState.search) {
            document.getElementById('searchInput').value = filterState.search;
        }
        
        const categories = params.get('categories');
        if (categories) {
            filterState.categories = categories.split(',');
            filterState.categories.forEach(cat => {
                const checkbox = document.querySelector(`#categoryFilters input[value="${cat}"]`);
                if (checkbox) checkbox.checked = true;
            });
        }
        
        const priceMin = params.get('price_min');
        const priceMax = params.get('price_max');
        if (priceMin) {
            filterState.priceMin = parseFloat(priceMin);
            document.getElementById('priceMin').value = priceMin;
        }
        if (priceMax) {
            filterState.priceMax = parseFloat(priceMax);
            document.getElementById('priceMax').value = priceMax;
        }
        
        const rating = params.get('rating');
        if (rating) {
            filterState.rating = parseFloat(rating);
            const ratingRadio = document.querySelector(`input[name="rating"][value="${rating}"]`);
            if (ratingRadio) ratingRadio.checked = true;
        }
        
        const condition = params.get('condition');
        if (condition) {
            filterState.condition = condition;
            const conditionRadio = document.querySelector(`input[name="condition"][value="${condition}"]`);
            if (conditionRadio) conditionRadio.checked = true;
        }
        
        const sortBy = params.get('sort');
        if (sortBy) {
            filterState.sortBy = sortBy;
            document.getElementById('sortSelect').value = sortBy;
        }
    }

    function updateURL() {
        const params = new URLSearchParams();
        
        if (filterState.search) params.set('search', filterState.search);
        if (filterState.categories.length) params.set('categories', filterState.categories.join(','));
        if (filterState.priceMin) params.set('price_min', filterState.priceMin);
        if (filterState.priceMax) params.set('price_max', filterState.priceMax);
        if (filterState.rating) params.set('rating', filterState.rating);
        if (filterState.condition !== 'all') params.set('condition', filterState.condition);
        if (filterState.sortBy !== 'relevance') params.set('sort', filterState.sortBy);
        
        const newURL = params.toString() ? `?${params.toString()}` : window.location.pathname;
        window.history.pushState({}, '', newURL);
    }

    async function loadProducts() {
        if (isLoading) return;
        isLoading = true;
        
        showLoadingState();
        
        try {
            // Actual API call
            const API_BASE = window.CONFIG ? window.CONFIG.API_BASE_URL : 'http://localhost:3000/api';
            const response = await fetch(`${API_BASE}/products?limit=100`, {
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            
            if (!response.ok) {
                throw new Error('Failed to load products');
            }
            
            const result = await response.json();
            console.log('Products API response:', result);
            
            // Handle response structure - API returns {success: true, data: [...]}
            let productsArray = [];
            if (result.success && Array.isArray(result.data)) {
                productsArray = result.data;
            } else if (Array.isArray(result.data)) {
                productsArray = result.data;
            } else if (Array.isArray(result)) {
                productsArray = result;
            }
            
            // Format product data and handle images properly
            allProducts = productsArray.map(p => {
                // Handle images - can be array of objects or URLs
                let images = [];
                if (p.images && Array.isArray(p.images) && p.images.length > 0) {
                    images = p.images.map(img => typeof img === 'object' ? img.image_url : img);
                } else if (p.primary_image) {
                    images = [p.primary_image];
                } else {
                    images = ['assets/default-product.png'];
                }
                
                return {
                    ...p,
                    images: images,
                    price: parseFloat(p.price) || 0,
                    original_price: p.original_price ? parseFloat(p.original_price) : null,
                    stock: parseInt(p.stock) || 0,
                    rating: parseFloat(p.average_rating) || 0,
                    review_count: parseInt(p.review_count) || 0,
                    sales_count: parseInt(p.sales_count) || 0
                };
            });
            
            console.log('Formatted products:', allProducts.length);
            applyFilters();
            
        } catch (error) {
            console.error('Error loading products:', error);
            // Fallback to mock data
            allProducts = [...mockProducts];
            applyFilters();
            showToast('Using demo data. Please check your connection.', 'warning');
        } finally {
            isLoading = false;
        }
    }
function updateFilterState() {
        // Get selected categories
        const categoryCheckboxes = document.querySelectorAll('#categoryFilters input[type="checkbox"]:checked');
        filterState.categories = Array.from(categoryCheckboxes).map(cb => cb.value);
        
        // Get price range
        const priceMin = document.getElementById('priceMin').value;
        const priceMax = document.getElementById('priceMax').value;
        filterState.priceMin = priceMin ? parseFloat(priceMin) : null;
        filterState.priceMax = priceMax ? parseFloat(priceMax) : null;
        
        // Get rating
        const ratingRadio = document.querySelector('input[name="rating"]:checked');
        filterState.rating = ratingRadio ? parseFloat(ratingRadio.value) : 0;
        
        // Get condition
        const conditionRadio = document.querySelector('input[name="condition"]:checked');
        filterState.condition = conditionRadio ? conditionRadio.value : 'all';
        
        // Get stock/sale filters
        filterState.inStockOnly = document.getElementById('inStockOnly').checked;
        filterState.onSaleOnly = document.getElementById('onSaleOnly').checked;
        
        // Get sort
        filterState.sortBy = document.getElementById('sortSelect').value;
    }
    function applyFilters() {
        // Update filter state from UI
        updateFilterState();
        
        let filtered = [...allProducts];
        
        // Search filter
        if (filterState.search) {
            const searchLower = filterState.search.toLowerCase();
            filtered = filtered.filter(p => 
                p.name.toLowerCase().includes(searchLower) ||
                p.description.toLowerCase().includes(searchLower) ||
                p.category.toLowerCase().includes(searchLower)
            );
        }
        
        // Category filter
        if (filterState.categories.length > 0) {
            filtered = filtered.filter(p => filterState.categories.includes(p.category));
        }
        
        // Price filter
        if (filterState.priceMin !== null) {
            filtered = filtered.filter(p => p.price >= filterState.priceMin);
        }
        if (filterState.priceMax !== null) {
            filtered = filtered.filter(p => p.price <= filterState.priceMax);
        }
        
        // Rating filter
        if (filterState.rating > 0) {
            filtered = filtered.filter(p => p.rating >= filterState.rating);
        }
        
        // Condition filter
        if (filterState.condition !== 'all') {
            filtered = filtered.filter(p => p.condition === filterState.condition);
        }
        
        // Stock filter
        if (filterState.inStockOnly) {
            filtered = filtered.filter(p => p.stock > 0);
        }
        
        // Sale filter
        if (filterState.onSaleOnly) {
            filtered = filtered.filter(p => p.original_price && p.original_price > p.price);
        }
        
        // Apply sorting
        filtered = sortProducts(filtered, filterState.sortBy);
        
        filteredProducts = filtered;
        
        // Update UI
        renderProducts();
        updateResultsCount();
        updateURL();
        updateFilterBadge();
    }

    function sortProducts(products, sortBy) {
        const sorted = [...products];
        
        switch (sortBy) {
            case 'price_asc':
                return sorted.sort((a, b) => a.price - b.price);
            case 'price_desc':
                return sorted.sort((a, b) => b.price - a.price);
            case 'newest':
                return sorted.reverse();
            case 'best_selling':
                return sorted.sort((a, b) => (b.sales_count || 0) - (a.sales_count || 0));
            case 'highest_rated':
                return sorted.sort((a, b) => b.rating - a.rating);
            case 'relevance':
            default:
                return sorted;
        }
    }

    function renderProducts() {
        const grid = document.getElementById('productsGrid');
        
        if (filteredProducts.length === 0) {
            showEmptyState();
            return;
        }
        
        grid.innerHTML = filteredProducts.map(product => createProductCard(product)).join('');
    }

    function createProductCard(product) {
        const discount = product.original_price ? 
            Math.round(((product.original_price - product.price) / product.original_price) * 100) : 0;
        
        const isOutOfStock = product.stock === 0;
        const isLowStock = product.stock > 0 && product.stock < 5;
        
        // Get first image with proper fallback
        let imageUrl = '/assets/default-product.png';
        
        // Try multiple ways to get the image
        if (product.images && Array.isArray(product.images) && product.images.length > 0) {
            const firstImg = product.images[0];
            if (typeof firstImg === 'object' && firstImg !== null && firstImg.image_url) {
                imageUrl = firstImg.image_url;
            } else if (typeof firstImg === 'string') {
                imageUrl = firstImg;
            }
        } else if (product.primary_image) {
            imageUrl = product.primary_image;
        } else if (product.image_url) {
            imageUrl = product.image_url;
        }
        
        // Ensure absolute URL for placeholder
        if (!imageUrl.startsWith('http') && !imageUrl.startsWith('/assets')) {
            imageUrl = '/assets/default-product.png';
        }
        
        return `
            <div class="product-card" data-product-id="${product.id}">
                <div class="product-image-wrapper" onclick="window.location.href='product-detail.html?slug=${product.slug || product.id}'" style="cursor: pointer;">
                    <img src="${imageUrl}" alt="${product.name}" class="product-image" loading="lazy" onerror="this.onerror=null; this.src='/assets/default-product.png';">
                    
                    ${discount > 0 ? `<div class="discount-badge">-${discount}%</div>` : ''}
                    ${product.condition === 'new' ? '<div class="condition-badge">New</div>' : ''}
                    ${isOutOfStock ? '<div class="out-of-stock-overlay">Out of Stock</div>' : ''}
                    
                    <button class="quick-view-btn" onclick="event.stopPropagation(); openQuickView(${product.id})" title="Quick View">
                        üëÅÔ∏è
                    </button>
                </div>
                
                <div class="product-content">
                    <h3 class="product-name" onclick="window.location.href='product-detail.html?slug=${product.slug || product.id}'" style="cursor: pointer;">${product.name}</h3>
                    
                    <div class="club-info">
                        <img src="${product.club_logo}" alt="${product.club_name}">
                        <span>${product.club_name}</span>
                    </div>
                    
                    <div class="rating">
                        <span class="stars">${'‚≠ê'.repeat(Math.floor(product.rating))}${product.rating % 1 >= 0.5 ? '‚≠ê' : ''}</span>
                        <span class="review-count">(${product.review_count})</span>
                    </div>
                    
                    <div class="price-section">
                        <span class="current-price">‡ß≥${product.price.toLocaleString()}</span>
                        ${product.original_price ? `<span class="original-price">‡ß≥${product.original_price.toLocaleString()}</span>` : ''}
                    </div>
                    
                    ${isLowStock ? `<div class="stock-warning">‚ö†Ô∏è Only ${product.stock} left</div>` : ''}
                    
                    <button class="btn btn-primary add-to-cart-btn" 
                        onclick="event.stopPropagation(); handleAddToCart(${product.id})"
                        ${isOutOfStock ? 'disabled' : ''}>
                        ${isOutOfStock ? 'üîî Notify Me' : 'üõí Add to Cart'}
                    </button>
                </div>
            </div>
        `;
    }

    function showLoadingState() {
        const grid = document.getElementById('productsGrid');
        grid.innerHTML = Array(24).fill(0).map(() => `
            <div class="skeleton-card">
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line short"></div>
                    <div class="skeleton-line short"></div>
                </div>
            </div>
        `).join('');
    }

    function showEmptyState() {
        const grid = document.getElementById('productsGrid');
        grid.innerHTML = `
            <div class="empty-state" style="grid-column: 1 / -1;">
                <div class="empty-state-icon">üì¶</div>
                <h3>No Products Found</h3>
                <p>We couldn't find any products matching your criteria.</p>
                <button class="btn btn-primary" onclick="clearAllFilters()">Clear Filters</button>
            </div>
        `;
    }

    function showErrorState() {
        const grid = document.getElementById('productsGrid');
        grid.innerHTML = `
            <div class="empty-state" style="grid-column: 1 / -1;">
                <div class="empty-state-icon">‚ö†Ô∏è</div>
                <h3>Something Went Wrong</h3>
                <p>Failed to load products. Please try again.</p>
                <button class="btn btn-primary" onclick="loadProducts()">Retry</button>
            </div>
        `;
    }

    function updateResultsCount() {
        const count = document.getElementById('resultsCount');
        const subtitle = document.getElementById('pageSubtitle');
        
        const total = filteredProducts.length;
        const clubCount = new Set(filteredProducts.map(p => p.club_name)).size;
        
        count.textContent = `Showing ${total} product${total !== 1 ? 's' : ''}`;
        subtitle.textContent = `${total} products from ${clubCount} verified clubs`;
    }

    function updateFilterBadge() {
        let count = 0;
        if (filterState.categories.length) count++;
        if (filterState.priceMin || filterState.priceMax) count++;
        if (filterState.rating > 0) count++;
        if (filterState.condition !== 'all') count++;
        if (filterState.inStockOnly) count++;
        if (filterState.onSaleOnly) count++;
        
        const badge = document.getElementById('filterCountBadge');
        badge.textContent = count;
        badge.style.display = count > 0 ? 'inline-block' : 'none';
    }

    function clearAllFilters() {
        // Reset filter state
        filterState.search = '';
        filterState.categories = [];
        filterState.priceMin = null;
        filterState.priceMax = null;
        filterState.rating = 0;
        filterState.condition = 'all';
        filterState.inStockOnly = false;
        filterState.onSaleOnly = false;
        
        // Reset UI
        document.getElementById('searchInput').value = '';
        document.getElementById('priceMin').value = '';
        document.getElementById('priceMax').value = '';
        document.querySelectorAll('#categoryFilters input[type="checkbox"]').forEach(cb => cb.checked = false);
        document.querySelector('input[name="rating"][value="0"]').checked = true;
        document.querySelector('input[name="condition"][value="all"]').checked = true;
        document.getElementById('inStockOnly').checked = false;
        document.getElementById('onSaleOnly').checked = false;
        
        applyFilters();
    }

    function setPriceRange(min, max) {
        document.getElementById('priceMin').value = min || '';
        document.getElementById('priceMax').value = max || '';
        filterState.priceMin = min;
        filterState.priceMax = max;
        applyFilters();
    }

    function setView(view) {
        currentView = view;
        const grid = document.getElementById('productsGrid');
        const gridBtn = document.getElementById('gridViewBtn');
        const listBtn = document.getElementById('listViewBtn');
        const colsSelect = document.getElementById('gridColsSelect');
        
        if (view === 'grid') {
            grid.classList.remove('list-view');
            gridBtn.classList.add('active');
            listBtn.classList.remove('active');
            colsSelect.style.display = 'block';
        } else {
            grid.classList.add('list-view');
            listBtn.classList.add('active');
            gridBtn.classList.remove('active');
            colsSelect.style.display = 'none';
        }
    }

    function setGridColumns(cols) {
        const grid = document.getElementById('productsGrid');
        grid.classList.remove('cols-3', 'cols-4', 'cols-5');
        grid.classList.add(`cols-${cols}`);
        gridColumns = parseInt(cols);
    }

    async function handleAddToCart(productId) {
        // Check if user is logged in
        const token = localStorage.getItem('token');
        if (!token) {
            showToast('Please login to add items to cart', 'error');
            setTimeout(() => window.location.href = 'login.html', 1000);
            return;
        }
        
        // Define API_BASE_URL here
        const API_BASE_URL = window.CONFIG ? window.CONFIG.API_BASE_URL : 'http://localhost:3000/api';
        
        // Find product
        const product = allProducts.find(p => p.id === productId);
        if (!product) return;
        
        // Check stock
        if (product.stock === 0) {
            alert('This product is out of stock');
            return;
        }
        
        try {
            console.log('Adding product to cart:', productId);
            
            // CALL BACKEND API TO SAVE TO DATABASE
            const response = await apiClient.post('/students/cart', {
                product_id: productId,
                quantity: 1
            });
            
            console.log('Add to cart response:', response);
            
            if (response.success) {
                showToast('Added to cart successfully!', 'success');
                
                // Update cart badge directly
                await updateCartBadge();
            }
            
        } catch (error) {
            console.error('Error adding to cart:', error);
            showToast(error.message || 'Failed to add to cart. Please try again.', 'error');
        }
    }

    

    function showToast(message, type = 'success') {
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? 'var(--success)' : 'var(--error)'};
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            z-index: 10000;
            animation: slideIn 0.3s ease;
        `;
        toast.textContent = message;
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }

    function openQuickView(productId) {
        const product = allProducts.find(p => p.id === productId);
        if (!product) return;
        
        const modal = document.getElementById('quickViewModal');
        const modalBody = document.getElementById('modalBody');
        
        const discount = product.original_price ? 
            Math.round(((product.original_price - product.price) / product.original_price) * 100) : 0;
        
        modalBody.innerHTML = `
            <div class="modal-images">
                <img src="${product.images && product.images[0] ? product.images[0] : '/assets/default-product.png'}" alt="${product.name}" class="modal-main-image" id="mainImage" onerror="this.onerror=null; this.src='/assets/default-product.png';">
                <div class="modal-thumbnails">
                    ${product.images.map((img, i) => `
                        <img src="${img}" alt="Thumbnail ${i + 1}" 
                            class="modal-thumbnail ${i === 0 ? 'active' : ''}" 
                            onclick="changeMainImage('${img}', event)">
                    `).join('')}
                </div>
            </div>
            
            <div class="modal-details">
                <h2>${product.name}</h2>
                
                <div class="club-info">
                    <img src="${product.club_logo}" alt="${product.club_name}">
                    <span>${product.club_name}</span>
                </div>
                
                <div class="rating">
                    <span class="stars">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
                    <span class="review-count">(${product.review_count} reviews)</span>
                </div>
                
                <div class="price-section">
                    <span class="current-price">‡ß≥${product.price.toLocaleString()}</span>
                    ${product.original_price ? `
                        <span class="original-price">‡ß≥${product.original_price.toLocaleString()}</span>
                        <span class="discount-badge" style="position: static; margin-left: 10px;">-${discount}%</span>
                    ` : ''}
                </div>
                
                <p style="margin: var(--spacing-4) 0; color: var(--gray-700);">
                    ${product.description}
                </p>
                
                <table class="specs-table">
                    <tr>
                        <td>Condition</td>
                        <td>${product.condition === 'new' ? 'Brand New' : 'Used'}</td>
                    </tr>
                    <tr>
                        <td>Stock</td>
                        <td>${product.stock > 0 ? `${product.stock} available` : 'Out of Stock'}</td>
                    </tr>
                    <tr>
                        <td>Category</td>
                        <td>${product.category}</td>
                    </tr>
                </table>
                
                <div style="display: flex; gap: var(--spacing-3); margin-top: var(--spacing-6);">
                    <button class="btn btn-primary" style="flex: 1;" 
                        onclick="handleAddToCart(${product.id}); closeQuickView();"
                        ${product.stock === 0 ? 'disabled' : ''}>
                        üõí Add to Cart
                    </button>
                    <a href="product-detail.html?id=${product.id}" class="btn btn-secondary" style="flex: 1; text-align: center;">
                        View Full Details
                    </a>
                </div>
            </div>
        `;
        
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function changeMainImage(src, event) {
        document.getElementById('mainImage').src = src;
        document.querySelectorAll('.modal-thumbnail').forEach(thumb => {
            thumb.classList.remove('active');
        });
        event.target.classList.add('active');
    }

    function closeQuickView() {
        const modal = document.getElementById('quickViewModal');
        modal.classList.remove('active');
        document.body.style.overflow = '';
    }

    function openFilterSheet() {
        const filtersSidebar = document.getElementById('filtersSidebar');
        const filterBtn = document.querySelector('.mobile-filter-btn');
        const body = document.body;
        
        console.log('Opening filter sheet, sidebar found:', !!filtersSidebar);
        
        // Create backdrop if it doesn't exist
        let backdrop = document.querySelector('.filter-backdrop-products');
        if (!backdrop) {
            backdrop = document.createElement('div');
            backdrop.className = 'filter-backdrop-products';
            backdrop.addEventListener('click', function(e) {
                e.stopPropagation();
                closeFilterSheet();
            });
            document.body.appendChild(backdrop);
        }
        
        if (filtersSidebar) {
            // Prevent backdrop clicks from closing immediately
            setTimeout(() => {
                backdrop.classList.add('active');
            }, 50);
            
            filtersSidebar.classList.add('active');
            body.classList.add('filter-open');
            body.style.overflow = 'hidden';
            
            if (filterBtn) {
                filterBtn.classList.add('active');
            }
            
            // Prevent sidebar clicks from bubbling to backdrop
            filtersSidebar.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            console.log('Filter sidebar classes:', filtersSidebar.className);
        } else {
            console.error('Filter sidebar not found!');
        }
    }

    function closeFilterSheet() {
        const filtersSidebar = document.getElementById('filtersSidebar');
        const backdrop = document.querySelector('.filter-backdrop-products');
        const filterBtn = document.querySelector('.mobile-filter-btn');
        const body = document.body;
        
        if (filtersSidebar) {
            filtersSidebar.classList.remove('active');
        }
        if (backdrop) {
            backdrop.classList.remove('active');
        }
        body.classList.remove('filter-open');
        body.style.overflow = '';
        
        if (filterBtn) {
            filterBtn.classList.remove('active');
        }
    }
    
    // Initialize filter functionality
    document.addEventListener('DOMContentLoaded', function() {
        const filtersSidebar = document.getElementById('filtersSidebar');
        const mobileFilterBtn = document.querySelector('.mobile-filter-btn');
        
        // Setup mobile filter button
        if (mobileFilterBtn) {
            mobileFilterBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                openFilterSheet();
            });
        }
        
        // Handle escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && filtersSidebar && filtersSidebar.classList.contains('active')) {
                closeFilterSheet();
            }
        });
        
        // Swipe down to close gesture
        (function() {
            let startY = 0;
            let currentY = 0;
            let isDragging = false;
            
            if (!filtersSidebar) return;
            
            filtersSidebar.addEventListener('touchstart', function(e) {
                if (filtersSidebar.scrollTop === 0) {
                    startY = e.touches[0].clientY;
                    isDragging = true;
                }
            }, { passive: true });
            
            filtersSidebar.addEventListener('touchmove', function(e) {
                if (!isDragging) return;
                
                currentY = e.touches[0].clientY;
                const diff = currentY - startY;
                
                if (diff > 0 && filtersSidebar.scrollTop === 0) {
                    e.preventDefault();
                    filtersSidebar.style.transform = `translateY(${Math.min(diff, 200)}px)`;
                    filtersSidebar.style.transition = 'none';
                    
                    const backdrop = document.querySelector('.filter-backdrop-products');
                    if (backdrop) {
                        backdrop.style.opacity = Math.max(0, 1 - (diff / 300));
                    }
                }
            }, { passive: false });
            
            filtersSidebar.addEventListener('touchend', function() {
                if (!isDragging) return;
                
                const diff = currentY - startY;
                filtersSidebar.style.transition = '';
                filtersSidebar.style.transform = '';
                
                const backdrop = document.querySelector('.filter-backdrop-products');
                if (backdrop) {
                    backdrop.style.opacity = '';
                }
                
                if (diff > 100) {
                    closeFilterSheet();
                }
                
                isDragging = false;
            }, { passive: true });
        })();
        
        // Update filter count badge
        function updateFilterBadge() {
            let count = 0;
            if (filterState.categories.length) count++;
            if (filterState.priceMin || filterState.priceMax) count++;
            if (filterState.rating > 0) count++;
            if (filterState.condition !== 'all') count++;
            if (filterState.inStockOnly) count++;
            if (filterState.onSaleOnly) count++;
            
            const badges = document.querySelectorAll('.filter-count-badge');
            badges.forEach(badge => {
                badge.textContent = count;
                badge.style.display = count > 0 ? 'inline-block' : 'none';
            });
        }
        
        // Update badge on filter changes
        const filterElements = document.querySelectorAll('#categoryFilters input, #priceMin, #priceMax, input[name="rating"], input[name="condition"], #inStockOnly, #onSaleOnly');
        filterElements.forEach(el => {
            el.addEventListener('change', updateFilterBadge);
        });
        
        updateFilterBadge();
    });

    function applyFiltersAndClose() {
        applyFilters();
        closeFilterSheet();
    }

    // Prevent sidebar from closing when scrolling
        document.addEventListener('DOMContentLoaded', function() {
            const filtersSidebar = document.getElementById('filtersSidebar');
            if (filtersSidebar) {
                filtersSidebar.addEventListener('touchstart', function(e) {
                    e.stopPropagation();
                }, { passive: true });
                
                filtersSidebar.addEventListener('touchmove', function(e) {
                    e.stopPropagation();
                }, { passive: true });
                
                filtersSidebar.addEventListener('touchend', function(e) {
                    e.stopPropagation();
                }, { passive: true });
            }
        });
    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(style);
</script>


</body>
</html>